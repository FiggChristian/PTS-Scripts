// ==UserScript==
// @name        ServiceNow Improvements
// @namespace   https://github.com/FiggChristian/PTS-Scripts
// @match       *://stanford.service-now.com/ticket.do*
// @match       *://stanford.service-now.com/incident.do*
// @match       *://stanford.service-now.com/sc_task.do*
// @match       *://mydevices.stanford.edu/*
// @version     2.0.0
// @description Adds macros, replacements, smart text, and Markdown support to ServiceNow.
// @icon        https://stanford.service-now.com/stanford_favicon.png
// @downloadURL https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/master/ServiceNow/service-now.user.js
// @updateURL   https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/master/ServiceNow/service-now.user.js
// @supportURL  https://github.com/FiggChristian/PTS-Scripts/issues
// @homepageURL https://github.com/FiggChristian/PTS-Scripts/
// @require     https://cdn.jsdelivr.net/npm/marked/marked.min.js
// @run-at      document-end
// ==/UserScript==
"use strict";function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function r(i,o,a){function s(t,e){if(!o[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,o,a)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){t.exports.CSS_PREFIX="pts-injected-script",t.exports.REPLACEMENT_MAX_RECURSION_DEPTH=10,t.exports.REPLACEMENT_START_DELIMITER="{{",t.exports.REPLACEMENT_END_DELIMITER="}}",t.exports.AUTOFILL_REPLACEMENT=!0,t.exports.NETDB_HOST="netdb.stanford.edu",t.exports.SUBMIT_DELAY=200,t.exports.CURSOR_REGEX=/\$\{CURSOR\((?:"((?:[^"]|\\")*)")?\)\}/,t.exports.CURSOR=function(e){return null==e||""===e?"${CURSOR()}":'${CURSOR("'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'")}'}},{}],2:[function(e,n,t){var a={};n.exports.trigger=function(e){if(e in a){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o=_createForOfIteratorHelper(a[e]);try{for(o.s();!(i=o.n()).done;)i.value.apply(void 0,n)}catch(e){o.e(e)}finally{o.f()}}},n.exports.addListener=function(e,t){n.exports.removeListener(e,t),a[e]=a[e]||[],a[e].push(t)},n.exports.removeListener=function(e,t){e in a&&(~(t=a[e].indexOf(t))&&a[e].splice(t,1))}},{}],3:[function(e,t,n){var r=e("./constants.js").CSS_PREFIX,m=e("./events.js"),s={};t.exports.waitForElements=function(e,t){s[e]=s[e]||[],s[e].push(t),o(e)};var i=e("./textareas.js"),l=i.textareaData,e=i.addTextareaData,i=i.addTextareaCallback;function o(e){var t,n=_createForOfIteratorHelper("string"==typeof e?[e]:Object.keys(s));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=document.querySelectorAll(r);if(i.length){var o,a=_createForOfIteratorHelper(s[r]);try{for(a.s();!(o=a.n()).done;)(0,o.value)(i)}catch(e){a.e(e)}finally{a.f()}}}}catch(e){n.e(e)}finally{n.f()}}function f(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}new MutationObserver(o).observe(document,{childList:!0,subtree:!0}),e({formFieldIndicator:function(e){var t=document.createElement("div");return t.innerHTML='<button class="btn btn-default"><span class="icon icon-connect-close"></span></button>Use <kbd>Tab</kbd> to move to the next field (<span>0/0</span>)',t.classList.add("".concat(r,"-tab-indicator"),"form-control"),t.style.display="none",e.parentNode.appendChild(t),t.firstElementChild.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation()}),t.firstElementChild.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),this.isTabbingFormFields=!1,this.wasTabbingFormFields=!1,this.formFieldIndex=0,this.formFieldInnerText=null,this.formFieldIndicator.style.display="none"}.bind(this)),t},formFieldIndex:0,formFieldInnerText:null,isTabbingFormFields:!1,wasTabbingFormFields:!1,suppressInputs:!1}),i(function(r){this.addEventListener("keydown",function(e){var t,n;"Tab"!=e.code||!r.isTabbingFormFields&&!r.wasTabbingFormFields||r.isAutoFillingReplacement||(t=e.shiftKey?Math.ceil(r.formFieldIndex)-1:Math.floor(r.formFieldIndex)+1,(n=function(e,t){if(!Array.isArray(e.formFieldInnerText)||t<1||t>=e.formFieldInnerText.length)return null;var n=e.element.value,r=e.formFieldInnerText;if(!n.startsWith(r[0]))return null;for(var i=r[0].length,o=1;o<t;o++){var a=n.indexOf(r[o],i);if(!~a)return null;i=a+r[o].length}e=n.indexOf(r[t],i);return~e?[i,e]:null}(r,t))&&(e.preventDefault(),r.formFieldIndex=t,(e=r.element).setSelectionRange.apply(e,_toConsumableArray(n)),r.formFieldIndicator.lastElementChild.innerText="".concat(t,"/").concat(r.formFieldInnerText.length-1),m.trigger("focus_form_field",r,t)))}),this.parentNode.addEventListener("focusout",function(e){(null===e.relatedTarget||e.relatedTarget instanceof HTMLElement&&!e.currentTarget.contains(e.relatedTarget))&&(r.isTabbingFormFields=!1,r.wasTabbingFormFields=!0,r.formFieldIndicator.style.display="none")})}),document.addEventListener("selectionchange",function(){var e=l.get(document.activeElement);if(e&&(e.wasTabbingFormFields||e.isTabbingFormFields)){var t=e.element.selectionStart,n=e.element.value,r=e.formFieldInnerText;if(!Array.isArray(r)||!n.startsWith(r[0]))return e.isTabbingFormFields=!1,e.wasTabbingFormFields=!1,e.formFieldInnerText=null,e.formFieldIndex=0,void(e.formFieldIndicator.style.display="none");if(t<r[0].length)return e.isTabbingFormFields=!1,e.wasTabbingFormFields=!0,e.formFieldIndex=.5,e.formFieldIndicator.lastElementChild.innerText="?/".concat(r.length-1),void(e.formFieldIndicator.style.display="");for(var i=r[0].length,o=1;o<r.length;o++){var a=n.indexOf(r[o],i);if(!~a)return e.isTabbingFormFields=!1,e.wasTabbingFormFields=!1,e.formFieldInnerText=null,e.formFieldIndex=0,void(e.formFieldIndicator.style.display="none");if(t<=a)return e.isTabbingFormFields=!0,e.wasTabbingFormFields=!1,e.formFieldIndex=o,e.formFieldIndicator.lastElementChild.innerText="".concat(o,"/").concat(r.length-1),void(e.formFieldIndicator.style.display="");if(t<(i=a+r[o].length)||t==i&&o==r.length-1)return e.isTabbingFormFields=!1,e.wasTabbingFormFields=!0,e.formFieldIndex=o+.5,e.formFieldIndicator.lastElementChild.innerText="?/".concat(r.length-1),void(e.formFieldIndicator.style.display="")}}}),t.exports.dedent=function(e){for(var t=e.split("\n"),n=null,r=t.length-1;0<=r;r--)if(t[r].trim().length){var i=t[r].substring(0,t[r].length-t[r].trimLeft().length);if(null!=n){if(i!=n){for(var o=i.length<n.length?i:n,a=i.length<n.length?n:i,s=1;s<o.length&&(o.substring(0,s)==a.substring(0,s)||(n=o.substring(0,s-1),1!=s));s++);n=o}}else n=i}else t[r]="";if(n)for(var l=t.length-1;0<=l;l--)t[l]=t[l].substring(n.length);for(;""==t[t.length-1];)t.pop();for(;""==t[0];)t.shift();return t.join("\n")},t.exports.escapeHTML=f,t.exports.replaceTextareaValue=function(e,t,n){e.element.focus();var r=document.queryCommandSupported("insertHTML")&&document.queryCommandEnabled("insertHTML"),i=document.queryCommandSupported("insertText")&&document.queryCommandEnabled("insertText");if(t!=e.element.value){for(var o=null,a=0;a<Math.max(t.length,e.element.value.length);a++)if(t[a]!=e.element.value[a]){o=a;break}for(var s=null,l=0;l<Math.max(t.length,e.element.value.length);l++)if(t[t.length-l-1]!=e.element.value[e.element.value.length-l-1]){s=l;break}var c=!1,d=t.substring(o,t.length-s);e.suppressInputs=!0,r?(e.element.setSelectionRange(o,e.element.value.length-s),c=document.execCommand("insertHTML",!1,f(d)+("\n"==d[d.length-1]?"<br>":""))):i&&(e.element.setSelectionRange(o,e.element.value.length-s),c=document.execCommand("insertText",!1,d)),c||(e.element.value=t),e.suppressInputs=!1,m.trigger("set_textarea_value",e,t)}if(1<n.length){e.formFieldIndicator.style.display="",e.isTabbingFormFields=!0,e.formFieldIndex=1,e.formFieldIndicator.lastElementChild.innerText="".concat(e.formFieldIndex,"/").concat(n.length),e.formFieldInnerText=new Array(n.length+1);for(var u=0,p=0;u<n.length;u++)e.formFieldInnerText[u]=t.substring(p,n[u][0]),p=n[u][1];e.formFieldInnerText[n.length]=t.substring(n[n.length-1][1]),m.trigger("init_textarea_form",e,n)}(c=e.element).setSelectionRange.apply(c,_toConsumableArray(n[0])),m.trigger("set_textarea_cursor",e,n[0][0],n[0][1])},t.exports.setAssignmentGroup=function(o,a){o.ac&&o.ac.element===o||new AJAXReferenceCompleter(o,o.getAttribute("data-ref"),"","");var s=o.ac;s.max||(s.max="15");var e,t=s.cacheGet(a);function n(e){var t,n={},r=_createForOfIteratorHelper(s._processItems(e).concat(s._processRecents(e)));try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i.label]=i.name}}catch(e){r.e(e)}finally{r.f()}a in n&&(s.referenceSelect(n[a],a),o.blur(),m.trigger("set_form_field","assignment_group",a))}t?n(t):(s.searchChars=a,e=new GlideAjax(s.PROCESSOR),t=s.addSysParms()+s.addDependentValue()+s.addRefQualValues()+s.addTargetTable()+s.addAdditionalValues()+s.addAttributes("ac_"),e.setQueryString(t),e.getXML(function(e){e.responseXML&&(s.cachePut(a,e.responseXML),n(e.responseXML))},null,null))},t.exports.turnNoIndexInto=function(e,t){return-1==t?e:t}},{"./constants.js":1,"./events.js":2,"./textareas.js":11}],4:[function(e,t,n){var r=e("./constants.js"),k=r.CSS_PREFIX,i=r.REPLACEMENT_START_DELIMITER,o=r.REPLACEMENT_END_DELIMITER,a=r.CURSOR,r=e("./helpers.js"),x=r.escapeHTML,C=r.replaceTextareaValue,A=r.dedent,L=r.setAssignmentGroup,I=e("./replacements.js").resolveReplacements,P=e("./textareas.js").textareaData,s=e("./textarea_subbar.js").addToSubBar,O=e("./events.js"),f=1,g=2,E=4,S=[{name:"Request MAC Address",description:"Ask user to provide the MAC address for the device in question.",fields:{additional_comments:"\n                Hi ".concat(i,"ticket.requester.name.first").concat(o,",\n                    \n                Could you please provide the hardware address (also known as a MAC address) for this device? Here are instructions on how to find it: ").concat(i,"link.mac_address").concat(o,"\n                \n                With this information we'll be able to look into your issue further.\n                \n                Best,\n                ").concat(i,"current_user.name.full").concat(o,"\n            ")},ticket_team:f|g},{name:"Net Trouble Report",description:"Shows the form for submitting a the Net Trouble report.",fields:{work_notes:"\n                ### Network Trouble Report\n\n                Wireless/wired/both: ".concat(a(),"\n                MAC addresses: ").concat(a(),"\n                Device description: ").concat(a(),"\n                Operating system: ").concat(a(),"\n                1st timestamp: ").concat(a(),"\n                2nd timestamp: ").concat(a(),"\n                3rd timestamp: ").concat(a(),"\n                Specific location of issue inside apartment: ").concat(a(),"\n                Nature of issue \x3c!-- slow, trouble connecting, dropped sessions, poor coverage --\x3e: ").concat(a(),"\n                Specific issue details: ").concat(a(),"\n                Troubleshooting attempted thus far: ").concat(a(),"\n            "),assignment_group:"UIT ResNet"},ticket_team:g},{name:"TSO Activation Form",description:"Shows the form for submitting a TSO activation request.",fields:{work_notes:"\n                Hi ITOC,\n\n                Could you please schedule an onsite appointment for UIT I&M to repair this TSO in a student residence, and then pass this ticket onto them?  Thank you!\n\n                \x3c!-- All fields are required to be completed with actionable data. --\x3e\n\n                Destination: UIT Installation and Maintenance\n                Bill to PTA: 1181807-6-AABVT\n                Building and Room: ".concat(a(),"\n                TSO number: ").concat(a(),"\n                Is this a primary or additional TSO: ").concat(a(),"\n                Customer phone: ").concat(a(i+"ticket.requester.number"+o),"\n                Customer email: ").concat(a(i+"ticket.requester.email"+o),"\n                Customer affiliation: ").concat(a(),"\n                Ethernet MAC address of device: ").concat(a(),"\n                NetDB status: ").concat(a("Good"),"\n                NetDB date last changed: ").concat(a(),"\n                NetDB date registered: ").concat(a(),"\n                DHCPlog recent history: ").concat(a(),"\n            "),assignment_group:"UIT IT Operations Center"},ticket_team:g},{name:"Time Stamps",description:"Request timestamps from the customer for a Net Trouble report.",fields:{additional_comments:"\n                Hello ".concat(i,"ticket.requester.name.first").concat(o,",\n\n                If you are still experiencing connection issues, could you please send us three times and dates of exactly when you’ve had trouble, each with a brief description of your activity at the time and how it behaved in a way that was less than desirable, as well as the MAC address of the device you were using? For example:\n                \n                > ").concat(i,"info.current_date").concat(o," at ").concat(i,"info.current_time").concat(o," – Dropped a Zoom Meeting\n\n                Three timestamps in that format should be enough for us to submit a report to the networking team to have them take a look at your device's connection history and figure out what's going on.\n\n                Thank you so much for your continued patience and cooperation while we work to resolve the issue.\n\n                Best,\n                ").concat(i,"current_user.name.first").concat(o,"\n            ")},ticket_team:g},{name:"Wireless Trouble",description:"Gives the user instructions for troubleshooting Wi-Fi.",fields:{additional_comments:"\n                Hello ".concat(i,"ticket.requester.name.first").concat(o,',\n\n                Thank you for reporting your trouble with the wireless network connectivity on the Stanford campus. There are some easy steps to take that resolve wireless network issues for most registered devices on campus:\n\n                1. Forget/remove "Stanford Visitor" and "eduroam" wireless networks from your device. Connect only to the "Stanford" wireless network. You can find instructions for forgetting a Wi-Fi network here: [Mac](').concat(i,"link.forget_wifi.mac").concat(o,") | [Windows](").concat(i,"link.forget_wifi.windows").concat(o,") | [iOS](").concat(i,"link.forget_wifi.ios").concat(o,") | [Android](").concat(i,"link.forget_wifi.android").concat(o,")\n                2. Toggle the Wi-Fi on your device off and back on again.\n                3. Completely power down and restart your computer or device.\n\n                In the event that these steps don't resolve your wireless trouble, please find your device's MAC address and send it to us so we may begin troubleshooting for you.  Please see the following resource for additional information about finding your MAC address: ").concat(i,"link.mac_address").concat(o,"\n\n                Again, we will require the MAC address of the device that you would like assistance with in order to help you. Thank you for your patience and cooperation.\n\n                Best,\n                ").concat(i,"current_user.name.first").concat(o,"\n            ")},ticket_team:f|g},{name:"Register via IPRequest",description:"Gives the user step-by-step instructions for registering a device through IPRequest.",fields:{additional_comments:"\n                Hi ".concat(i,"ticket.requester.name.first").concat(o,",\n\n                To register your device, you can follow these steps:\n                \n                1. You'll need to find the device's hardware address (also called its MAC address). Here are instructions for how to do so: ").concat(i,"link.mac_address").concat(o,".\n                2. Once you've found the MAC address for your device, go to ").concat(i,"link.iprequest").concat(o," on your computer (make sure the computer is already connected to the Stanford network or Stanford's VPN, as the website will not load otherwise).\n                3. Fill out the short questionnaire and continue to your registrations.\n                4. Click the **New Registration** button at the bottom.\n                5. Continue through the terms and conditions until it asks whether the computer you are currently staring at is the one you want to register. Select **No**.\n                6. From the Device Type list, choose your device, or **Other** if it is not listed.\n                7. For the Operating System, choose **Other (Wired)** if you plan on connecting your device via an ethernet cable, or **Other (Gaming)** if you plan on connecting it via Wi-Fi (even if your device is not going to be used for gaming).\n                8. Under Hardware Address, copy and paste the MAC address you found in Step 1.\n                9. Continue through the registration, filling out any details it asks for.\n                10. Once registered, your device should be able to connect to the internet within about 20 minutes. It's best to unplug it for about two minutes and plug it back in to give it the best chance of seeing the new changes on the system.\n                \n                Please let us know if you have any questions or issues.\n                \n                Best,\n                ").concat(i,"current_user.name.first").concat(o,"\n            ")},ticket_team:f|g},{name:"Register Router",description:"Gives the user step-by-step instructions for setting up a router.",fields:{additional_comments:"\n                Hi ".concat(i,"ticket.requester.name.first").concat(o,",\n\n                Please follow the steps below for setting up your own router:\n                \n                1. Purchase a router. Most major router brands (e.g. TP-Link, NETGEAR, ASUS, Linksys, Google, etc.) should do, so feel free to choose one that best suits your needs and price point.\n                2. Once you have the router, look for its MAC address, which is usually printed on the side. It should be 12 alphanumeric digits in the form of `A1:B2:C3:D4:E5:F6`.\n                3. Once you've found the MAC address, go to ").concat(i,"link.iprequest").concat(o," on your computer (make sure the computer you're using is connected to the Stanford network, **not** the router's network).\n                4. Fill out the short questionnaire and continue to your registrations.\n                5. Click the **New Registration** button at the bottom.\n                6. Continue through the terms and conditions until it asks whether the computer you are currently staring at is the one you want to register. Select **No**.\n                7. From the Device Type list, choose **Other** if it is not listed.\n                8. For the Operating System, choose **Other (Wired)**.\n                9. Under Hardware Address, copy and paste the MAC address you found in Step 2.\n                9. Continue through the registration, filling out any details it asks for.\n                10. Once registered, please unplug the router for at least two minutes, as routers tend to not want to update their settings unless they remain unplugged for a bit of time. After 20 or so minutes, your router should be able to connect to the internet, allowing you to connect other devices to the router's network.\n                \n                Please let us know if you have any questions or issues.\n                \n                Best,\n                ").concat(i,"current_user.name.first").concat(o,"\n            ")},ticket_team:f|g},{name:"Stale Ticket Check-In",description:"Asks the user for an update on an old ticket.",fields:{additional_comments:"\n                Hi ".concat(i,"ticket.requester.name.first").concat(o,",\n                \n                Just wanted to check in and see if you were able to solve your issue or if you required further assistance? Please let us know so we can close this ticket or continue troubleshooting if necessary. \n                \n                Best,\n                ").concat(i,"current_user.name.first").concat(o,"\n            ")},ticket_team:f|g},{name:"Upgrade to Windows 10 Education",description:"Gives the user step-by-step instructions for upgrading to Windows 10 Education.",fields:{additional_comments:"\n                Hello ".concat(i,"ticket.requester.name.first").concat(o,",\n\n                You can upgrade your version of Windows 10 to Windows 10 Education (which is compatible with Stanford's encryption software and BitLocker) by following these steps:\n                \n                1. Go to [Stanford's Software Licensing Webstore](https://stanford.onthehub.com/WebStore/OfferingDetails.aspx?o=bb702eb6-cbf8-e811-810d-000d3af41938) to get your free product key of Windows 10 Education (one per student).\n                2. Right click the **Start Menu** from your desktop.\n                3. Select **System**.\n                4. Click **Change product key**.\n                5. Copy & paste the 25-digit license key from step 1.\n                6. Allow the system to reboot (may take 5–10 minutes).\n                \n                Hope this helps. Lets us know if you have any questions or issues.\n                \n                Best,\n                ").concat(i,"current_user.name.first").concat(o,"\n            ")},ticket_team:f},{name:"2.4 GHz-Only Devices",description:"Explains what to do for devices that only work on 2.4 a GHz band.",fields:{additional_comments:"\n                Hi ".concat(i,"ticket.requester.name.first").concat(o,",\n                \n                It looks like that the kind of device you want to use only works on a 2.4 GHz band, which Stanford's network is not currently set up to provide in the way at-home Wi-Fi routers do. You can read more about unsupported devices here: https://stanford.service-now.com/student_services?id=kb_article&sys_id=fb9174068746f850d9e07778cebb35d1.\n                \n                While your device won't be able to connect to Stanford's network, you have two options:\n                \n                1. Buy another device that does work with both 2.4 GHz and 5 GHz bands (which may or may not exist since many devices, especially \"smart home\" devices, are made for exactly that: homes with a private Wi-Fi network, not campuses with enterprise-grade Wi-Fi networks). If buying online such as from Amazon, make sure to look at comments and reviews to verify that the device does in fact work on both 2.4 GHz and 5 GHz bands.\n                2. Set up your own router. You can purchase your own router and get it connected to the Stanford network, and the router should be able to broadcast both 2.4 GHz and 5 GHz bands correctly for the device to connect to. We can guide you through the process of setting up your router if you choose to go this route.\n                \n                Please let us know if you have questions or issues.\n                \n                Best,\n                ").concat(i,"current_user.name.first").concat(o,"\n            ")},ticket_team:f|g}];t.exports.MACROS=S,t.exports.init=function(){s(function(e){var t=document.createElement("button");return t.innerText="Apply Macro",t.classList.add("btn","btn-default"),t.addEventListener("click",function(e){e.preventDefault(),F(!0)}),t});var t=document.createElement("div");t.classList.add("modal-backdrop","in","stacked"),t.style.display="none",window.top.document.body.appendChild(t);var n=document.createElement("div");n.classList.add("modal","in","settinngs-modal"),n.role="dialog",n.innerHTML='\n        <div class="modal-dialog modal-lg ng-scope compact">\n            <div class="modal-content">\n                <div class="modal-body clearfix">\n                    <div class="tab-aside col-sm-8" id="'.concat(k,'-macro-list-panel">\n                        <header class="modal-header clearfix">Macros</header>\n                        <div class="settings-tabs">\n                            <div class="sn-aside sn-aside_left sn-aside_min-width">\n                                <div class="sn-aside-body ').concat(k,'-macro-list-flex">\n                                    <div id="').concat(k,'-macro-search-container" class="modal-header">\n                                        <input id="').concat(k,'-macro-search" placeholder="Filter macros" class="form-control">\n                                    </div>\n                                    <div class="sn-widget-list_v2" role="tablist" aria-label="List of macros" id="').concat(k,'-macro-list"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="tab-content col-sm-4" id="').concat(k,'-macro-preview-panel">\n                        <header class="modal-header clearfix">\n                            <div class="modal-header-right"></div>\n                            <div class="modal-header-center">\n                                <h4 class="modal-title text-center" id="').concat(k,'-macros_modal_panel_header">Preview</h4>\n                            </div>\n                            <div class="modal-header-left">\n                                <button class="btn close icon-cross" id="').concat(k,'-dismiss-icon">\n                                    <span class="sr-only">Close</span>\n                                </button>\n                            </div>\n                        </header>\n                        <div class="form-horizontal view-stack settings-tab-panels" aria-labelledby="').concat(k,'-macros_modal_panel_header">\n                            <div class="tab-pane view-stack-item" role="tabpanel" aria-labelledby="').concat(k,'-macros_modal_panel_header" id="').concat(k,'-macros_modal_preview-body"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <i class="focus-trap-boundary-south" tabindex="0"></i>\n    ');var h=n.querySelector("#".concat(k,"-macro-list-panel")),v=n.querySelector("#".concat(k,"-macro-preview-panel")),b=n.querySelector("#".concat(k,"-macro-list")),y=n.querySelector("#".concat(k,"-macros_modal_preview-body")),w=n.querySelector("#".concat(k,"-macros_modal_panel_header")),u=n.querySelector("#".concat(k,"-macro-search")),p=[];function r(e){"Escape"==e.code&&(e.preventDefault(),e.stopPropagation(),F(!1))}function F(e){e?(u.value="",i(),h.classList.replace("col-sm-4","col-sm-8"),v.classList.replace("col-sm-8","col-sm-4"),t.style.display="block",n.style.display="block",u.focus(),O.trigger("show_macro_modal"),document.addEventListener("keydown",r),window.top.document.addEventListener("keydown",r)):(t.style.display="none",n.style.display="none",O.trigger("hide_macro_modal"),document.removeEventListener("keydown",r),window.top.document.removeEventListener("keydown",r))}function i(){b.innerText="",p.length=0;var e=document.getElementById("sys_display.sc_task.assignment_group")||document.getElementById("sys_display.incident.assignment_group")||document.getElementById("sys_display.ticket.assignment_group"),l=f|g|E;e&&(l={"VPSA LTS Student Technology Services Triage":f,"VPSA LTS Student Technology Services Escalation":g,"VPSA LTS Student Technology Services Resolution":E}[e.value]||l);var c=u.value.toLowerCase().split(/[^a-z\d]+/);""==c[0]&&c.shift();for(var d=0,t=0;t<S.length;t++)(function(e){var t=S[e];if(!(t.ticket_team&l))return;if(c.length){var n,r=!1,i=_createForOfIteratorHelper(c);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!t.name.toLowerCase().includes(o)&&!t.description.toLowerCase().includes(o)){r=!0;break}}}catch(e){i.e(e)}finally{i.f()}if(r)return}p.push(t);var a=document.createElement("span");function s(e){e.preventDefault(),e.stopPropagation(),m(S[+e.currentTarget.getAttribute("data-".concat(k,"-macro-index"))])}a.role="tab",a.classList.add("sn-widget-list-item"),a.tabIndex=0,a.innerHTML='\n                <div class="sn-widget-list-content">\n                    <span class="sn-widget-list-title">\n                        '.concat(x(t.name),'\n                        <span class="sn-widget-list-subtitle">').concat(t.description,'</span>\n                    </span>\n                </div>\n                <div class="sn-widget-list-content sn-widget-list-content_static">\n                    <div class="sn-widget-list-image icon-preview"></div>\n                </div>\n            '),a.setAttribute("data-".concat(k,"-visible-macro-index"),d++),a.setAttribute("data-".concat(k,"-macro-index"),e),a.lastElementChild.addEventListener("mousedown",function(e){e.stopPropagation()}),a.lastElementChild.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),_(+e.currentTarget.parentNode.getAttribute("data-".concat(k,"-visible-macro-index")))}),a.lastElementChild.addEventListener("keydown",function(e){"Enter"!=e.code&&"Space"!=e.code||(e.preventDefault(),e.stopPropagation(),e.currentTarget.click())}),a.addEventListener("keydown",function(e){var t=+e.currentTarget.getAttribute("data-".concat(k,"-visible-macro-index"));"ArrowUp"==e.code?(e.preventDefault(),e.stopPropagation(),0<t?_(t-1):u.focus()):"ArrowDown"==e.code?(e.preventDefault(),e.stopPropagation(),t<b.children.length-1?_(1+t):u.focus()):"Enter"!=e.code&&"Space"!=e.code||(e.preventDefault(),e.stopPropagation(),s(e))}),a.addEventListener("mousedown",s),a.addEventListener("click",s),a.addEventListener("focus",function(e){_(+e.currentTarget.getAttribute("data-".concat(k,"-visible-macro-index")))}),b.appendChild(a)})(t);O.trigger("populate_macros_tablist"),_(-1)}function _(e){var t,n=_createForOfIteratorHelper(b.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.classList.remove("state-active"),r.ariaSelected=!1}}catch(e){n.e(e)}finally{n.f()}if(e<0||e>=b.children.length)h.classList.replace("col-sm-4","col-sm-8"),v.classList.replace("col-sm-8","col-sm-4"),y.innerText="",w.innerText="Preview";else{h.classList.replace("col-sm-8","col-sm-4"),v.classList.replace("col-sm-4","col-sm-8");var i=b.children[e];document.activeElement!=i&&i.focus(),i.classList.add("state-active"),i.ariaSelected=!0;var o=S[+i.getAttribute("data-".concat(k,"-macro-index"))];w.innerText=x(o.name),y.innerHTML='\n                <div class="'.concat(k,'-preview-header">\n                    <button class="').concat(k,'-back-button btn close icon-arrow-left" style="float: none">\n                        <span class="sr-only">Back</span>\n                    </button>\n                </div>\n                <div id="').concat(k,'-preview-fields"></div>\n            '),y.firstElementChild.firstElementChild.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),_(-1)});var a=y.firstElementChild.nextElementSibling,s=Object.keys(o.fields);~(e=s.indexOf("work_notes"))&&(s.splice(e,1),s.unshift("work_notes")),~(e=s.indexOf("additional_comments"))&&(s.splice(e,1),s.unshift("additional_comments"));for(var l=0,c=s;l<c.length;l++){var d=c[l],u={additional_comments:"Additional Comments (Customer Visible)",work_notes:"Work Notes",assignment_group:"Assignment Group"}[d]||null;if(null!==u){var p=o.fields[d];if("function"==typeof p){if(null===(p=p()))continue;p=A(p+"")}else p=A(p+"");var p=_slicedToArray(I(p,p.length),2),m=p[0],f=p[1];if(1==f.length&&f[0][0]==f[0][1]&f[0][0]==m.length)f=[];else{for(var g=f.length-1;0<=g;g--)m=m.substring(0,f[g][0])+'<span class="'.concat(k,"-caret-position-span ").concat(k,"-span-").concat(f[g][0]==f[g][1]?"empty":"full",'"><span></span><span></span><span>')+x(m.substring(f[g][0],f[g][1]))+"</span></span>"+x(m.substring(f[g][1],g==f.length-1?m.length:f[g+1][0]))+m.substring(g==f.length-1?m.length:f[g+1][0]);m=x(m.substring(0,f[0][0]))+m.substring(f[0][0])}p=document.createElement("div");p.classList.add("".concat(k,"-preview-field-container")),p.innerHTML="\n                    <div>".concat(u,'</div>\n                    <div class="').concat(k,"-preview-field-value ").concat("work_notes"==d?"".concat(k,"-preview-work_notes-value"):"",' form-control">').concat(m,"</div>\n                "),a.appendChild(p)}}O.trigger("focus_macro_tab",o,i)}}function m(e){F(!1);var t,n=Object.keys(e.fields);"additional_comments"in e.fields&&"work_notes"in e.fields?(t=document.querySelector("#single-input-journal-entry button.icon-stream-all-input"))&&t.click():!("additional_comments"in e.fields&&document.querySelector("#activity-stream-textarea:not([aria-label*='Additional comments'])")||"work_notes"in e.fields&&document.querySelector("#activity-stream-textarea:not([aria-label*='Work notes'])"))||(t=document.querySelector(".sn-controls.row .pull-right input[type='checkbox'][name='work_notes-journal-checkbox'], .sn-controls.row .pull-right input[type='checkbox'][name='comments-journal-checkbox']"))&&t.click(),"work_notes"in e.fields&&(n.splice(n.indexOf("work_notes"),1),n.push("work_notes")),"additional_comments"in e.fields&&(n.splice(n.indexOf("additional_comments"),1),n.push("additional_comments"));for(var r=0,i=n;r<i.length;r++){var o=i[r],a=void 0;if("function"==typeof e.fields[o]){var s=e.fields[o]();if(null===s)continue;a=A(s+"")}else a=A(e.fields[o]+"");var a=_slicedToArray(I(a,a.length),2),l=a[0],c=a[1];if("additional_comments"==o){for(var d=[],u=0,p=[document.getElementById("activity-stream-comments-textarea"),document.querySelector("#activity-stream-textarea[aria-label*='Additional comments']"),document.getElementById("sc_task.parent.comments")];u<p.length;u++){var m=p[u];m&&"TEXTAREA"==m.nodeName&&P.get(m)&&(m.offsetParent?d.push(m):C(P.get(m),l,c))}for(var f=0,g=d;f<g.length;f++){var h=g[f];C(P.get(h),l,c)}}else if("work_notes"==o){for(var v=[],b=0,y=[document.getElementById("activity-stream-work_notes-textarea"),document.querySelector("#activity-stream-textarea[aria-label*='Work notes']")];b<y.length;b++){var w=y[b];w&&"TEXTAREA"==w.nodeName&&P.get(w)&&(w.offsetParent?v.push(w):C(P.get(w),l,c))}for(var _=0,k=v;_<k.length;_++){var x=k[_];C(P.get(x),l,c)}}else if("assignment_group"==o)for(var E=0,S=[document.getElementById("sys_display.sc_task.assignment_group"),document.getElementById("sys_display.incident.assignment_group"),document.getElementById("sys_display.ticket.assignment_group")];E<S.length;E++){var T=S[E];T&&L(T,l)}}O.trigger("apply_macro",e)}u.addEventListener("input",function(e){e.stopPropagation(),i()}),u.addEventListener("keydown",function(e){0!=p.length&&("Enter"==e.code?(e.preventDefault(),e.stopPropagation(),m(p[0])):"ArrowDown"==e.code?(e.preventDefault(),e.stopPropagation(),_(0)):"ArrowUp"==e.code&&(e.preventDefault(),e.stopPropagation(),_(p.length-1)))}),u.addEventListener("focus",function(){_(-1)}),n.querySelector("#".concat(k,"-dismiss-icon")).addEventListener("click",function(e){e.preventDefault(),F(!1)}),n.style.display="none",window.top.document.body.appendChild(n),n.addEventListener("click",function(e){e.target===e.currentTarget&&(e.preventDefault(),F(!1))}),n.id="".concat(k,"-macros_modal")}},{"./constants.js":1,"./events.js":2,"./helpers.js":3,"./replacements.js":7,"./textarea_subbar.js":10,"./textareas.js":11}],5:[function(e,t,n){var r=e("./constants.js"),s=r.CSS_PREFIX,i=r.SUBMIT_DELAY,r=e("./helpers.js"),M=r.turnNoIndexInto,l=r.escapeHTML,o=r.waitForElements,a=r.replaceTextareaValue,r=e("./textareas.js"),c=r.addTextareaData,d=r.textareaData,u=e("./textarea_subbar.js").addToSubBar,r=e("./styles.js"),p=r.SMART_TEXT,N=r.REPLACEMENT_SUBSTYLES,m=e("./events.js");function f(e,t){var n=d.get(e);if(n)if("boolean"==typeof t?n.isPreviewingMarkdown=t:(t.preventDefault(),t.stopPropagation(),n.isPreviewingMarkdown=!n.isPreviewingMarkdown),n.markdownPreviewer.setAttribute("data-".concat(s,"-is-previewing"),n.isPreviewingMarkdown),n.subbarElements[n.markdownPreviewerSubbarIndex].setAttribute("data-".concat(s,"-is-previewing"),n.isPreviewingMarkdown),n.isPreviewingMarkdown){for(var r,i=g(e.value),o="";~(r=i.indexOf("[code]"));){var a=M(i.length,i.indexOf("[/code]"));o+=l(i.substring(0,r)),o+=i.substring(r+"[code]".length,a),i=i.substring(a+"[/code]".length)}o+=l(i),n.markdownPreviewer.shadowRoot.lastElementChild.innerHTML=o,n.markdownPreviewer.style.paddingLeft=n.elementStyles.paddingLeft,n.markdownPreviewer.style.paddingRight=n.elementStyles.paddingRight,n.markdownPreviewer.style.paddingTop=n.elementStyles.paddingTop,n.markdownPreviewer.style.paddingBottom=n.elementStyles.paddingBottom,n.markdownPreviewer.style.display="block",e.style.display="none",n.decorator&&(n.decorator.style.display="none"),m.trigger("show_preview",n)}else n.markdownPreviewer.style.display="none",e.style.display="",n.decorator&&(n.decorator.style.display=""),m.trigger("hide_preview",n)}function g(e){if("[code][/code]"==(e=e.replace(/<!--[\s\S]*-->/g,"")))return e;for(var t,n="",r=[];~(t=e.indexOf("[code]"));){n+=e.substring(0,t),e=e.substring(t+6);for(var i="",o=1;o;){var a=e.indexOf("[code]"),s=e.indexOf("[/code]");~s?~a&&a<s?(i+=e.substring(0,a),e=e.substring(a+6),o++):(i+=e.substring(0,s),e=e.substring(s+7),o--):e+="[/code]"}""==i.replace(/ +/,"")?n+=i:(n+="[code][/code]",r.push(i.replace(/\n/g,"<br/>")))}for(n=(n+=e).replace(/&/g,"&amp;"),n=(n=marked(n,{mangle:!1,headerIds:!1,smartLists:!0})).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&");~(d=n.lastIndexOf("[code][/code]"));)n=n.substring(0,d+6)+r.pop()+n.substring(d+6);for(var l=[{type:"start",insideCodeValue:null,outsideCodeValue:"",insideCodePenalty:1/0,outsideCodePenalty:0}],c=n=(n=n.replaceAll("\n","")).replaceAll("[/code][code]",""),d=0;~(d=c.indexOf("[code]"));)0!=d&&l.push({type:"plain",insideCodeValue:c.substring(0,d),outsideCodeValue:c.substring(0,d),insideCodePenalty:0,outsideCodePenalty:0}),~(d=(c=c.substring(d+6)).indexOf("[/code]"))||(d=c.length),l.push({type:"code",insideCodeValue:c.substring(0,d),outsideCodeValue:null,insideCodePenalty:0,outsideCodePenalty:1/0}),c=c.substring(d+7);c.length&&l.push({type:"plain",insideCodeValue:c,outsideCodeValue:c,insideCodePenalty:0,outsideCodePenalty:0});for(var u=null,p=new Set(Object.keys(N)),m=0,f=l;m<f.length;m++){var g=f[m];if("code"==g.type){var h,u=u||g,v=g.insideCodeValue.toLowerCase(),b=_createForOfIteratorHelper(p);try{for(b.s();!(h=b.n()).done;){var y=h.value;v.includes("<"+y.toLowerCase())&&p.delete(y)}}catch(e){b.e(e)}finally{b.f()}if(0==p.size)break}}var w,_="";for(w in N)p.has(w)||(_+=N[w]);_&&(u.insideCodeValue="<style>".concat(_,"</style>").concat(u.insideCodeValue));for(var k,x,E=0;E<l.length-1;E++)"plain"==l[E].type&&(x=Math.min(M(1/0,l[E].outsideCodeValue.indexOf("<")),M(1/0,l[E].outsideCodeValue.indexOf(">")),M(1/0,l[E].outsideCodeValue.indexOf("&"))),isFinite(x)&&(k=l[E].outsideCodeValue.substring(x),l[E].outsideCodeValue=l[E].outsideCodeValue.substring(0,x),l[E].insideCodeValue=l[E].outsideCodeValue.substring(0,x),x={">":"&gt;","<":"&lt;","&":"&amp;"}[k[0]],l.splice(E+1,0,{type:"escaped",insideCodeValue:x,outsideCodeValue:k[0],insideCodePenalty:x.length-1,outsideCodePenalty:0},{type:"plain",insideCodeValue:k.substring(1),outsideCodeValue:k.substring(1),insideCodePenalty:0,outsideCodePenalty:0}),E++));var S=new Array(l.length+1),T=new Array(l.length+1);S[l.length]=[1/0,null],T[l.length]=[0,null];for(var F=l.length-1;0<=F;F--){var C=S[F+1][0]+l[F].insideCodePenalty+0,A=T[F+1][0]+l[F].insideCodePenalty+"[/code]".length,L=T[F+1][0]+l[F].outsideCodePenalty+0,I=S[F+1][0]+l[F].outsideCodePenalty+"[code]".length;S[F]=[Math.min(A,C),A<=C],T[F]=[Math.min(I,L),I<L]}for(var P="",O=!1,R=0;R<l.length;R++)P+=O?l[R].insideCodeValue:l[R].outsideCodeValue,(O?S:T)[R][1]&&(P+=(O=!O)?"[code]":"[/code]");return P}marked.use({tokenizer:{html:function(e){return null}},renderer:{code:function(e,t,n){return"[code]<pre><code>[/code]".concat(e.replace(/\n/g,"[code]<br>[/code]"),"[code]</code></pre>[/code]")},blockquote:function(e){return"[code]<blockquote>[/code]".concat(e,"[code]</blockquote>[/code]")},heading:function(e,t,n,r){return"[code]<h".concat(t,">[/code]").concat(e,"[code]</h").concat(t,">[/code]")},hr:function(){return"[code]<hr/>[/code]"},list:function(e,t,n){return"[code]<".concat(t?"ol".concat(1==n?"":' start="'.concat(n,'"')):"ul",">[/code]\n").concat(e,"[code]</").concat(t?"o":"u","l>[/code]")},listitem:function(e,t,n){return"[code]<li>[/code]".concat(e,"[code]</li>[/code]")},checkbox:function(e){return'[code]<input type="checkbox"'.concat(e?" checked":"",">[/code] ")},paragraph:function(e){return"[code]<p>[/code]".concat(e,"[code]</p>[/code]")},table:function(e,t){return"[code]<table><thead>[/code]".concat(e,"[code]</thead><tbody>[/code]").concat(t,"[code]</tbody></table>[/code]")},tablerow:function(e){return"[code]<tr>[/code]".concat(e,"[code]</tr>[/code]")},tablecell:function(e,t){return"[code]<td".concat(t.align?' style="text-align:'.concat(t.align,'"'):"",">[/code]").concat(e,"[code]</td>[/code]")},strong:function(e){return"[code]<strong>[/code]".concat(e,"[code]</strong>[/code]")},em:function(e){return"[code]<em>[/code]".concat(e,"[code]</em>[/code]")},codespan:function(e){return"[code]<code>[/code]".concat(e,"[code]</code>[/code]")},br:function(){return"[code]<br/>[/code]"},del:function(e){return'[code]<span style="text-decoration:line-through"><del>[/code]'.concat(e,"[code]</del></span>[/code]")},link:function(e,t,n){return'[code]<a href="'.concat(e,'"').concat(t?' title="'.concat(t,'"'):"",">[/code]").concat(n,"[code]</a>[/code]")},image:function(e,t,n){return'[code]<img style="max-width:100%" src="'.concat(e,'"').concat(n?' alt="'.concat(n,'"'):"").concat(t?' title="'.concat(t,'"'):"","/>[/code]")},text:function(e){return e.replace(/\n/g,"[code]<br/>[/code]")}},extensions:[{name:"codeBlock",level:"inline",start:function(e){return M(e.length,e.indexOf("[code][/code]"))},tokenizer:function(e,t){return!!e.startsWith("[code][/code]")&&{type:"codeBlock",raw:"[code][/code]",tokens:[]}},renderer:function(e){return"codeBlock"==e.type&&e.raw}},{name:"autoStanfordLink",level:"inline",start:function(e){var t=e.match(/(([a-zA-Z0-9\-]+\.?)+\.|)stanford\.edu(\/[^\s<]*|(?!\B))/i);return t?t.index:e.length},tokenizer:function(e,t){var n,r=/^(([a-zA-Z0-9\-]+\.?)+\.|)stanford\.edu(\/[^\s<]*|(?!\B))/i.exec(e);if(r){for(;n=r[0],r[0]=/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/.exec(r[0])[0],n!==r[0];);return e=escape(r[0]),{type:"link",raw:r[0],text:e,href:"https://"+e,tokens:[{type:"text",raw:e,text:e}]}}return!1}},{name:"formTable",level:"block",tokenizer:function(e,t){if(/^(?!\n)(?:.*?:.*?(?:\n.+)*?)(?:\n(?!  |\t).*?:.*?(?:\n.+)*?){2,}(?=$|\n$|\n\n)/.exec(e)){for(var n=[],r=e.trimLeft();r;){var i=/^(?:.*?:.*?(?:\n.+)*?)(?=\n(?!  |\t).*?:.*?(?:\n.+)*?|\n\n|$)/.exec(r);if(!i)break;i=i[0];n.push(i),r=r.substring(i.length).trimLeft()}for(var e=e.substring(0,e.length-r.length),o=[],a=0,s=n;a<s.length;a++){var l=s[a],c=l.indexOf(":"),d=[l.substring(0,c),l.substring(c+1)],l=d[0],c=d[1],l=l.trim(),c=c.split("\n").map(function(e){return e.trim()}).join("\n"),d={type:"formTableRow",before:[],after:[]};this.lexer.inline(l.trim(),d.before),this.lexer.inline(c.trim(),d.after),o.push(d)}return{type:"formTable",raw:e,tokens:o}}return!1},renderer:function(e){var t,n="[code]<table><tbody>[/code]",r=_createForOfIteratorHelper(e.tokens);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="[code]<tr><td>[/code]"+this.parser.parseInline(i.before)+"[code]</td><td>[/code]"+this.parser.parseInline(i.after)+"[code]</td></tr>[/code]"}}catch(e){r.e(e)}finally{r.f()}return n+="[code]</tbody></table>[/code]"}}]}),t.exports.init=function(){var n=document.createElement("button");n.innerText="Preview",n.classList.add("".concat(s,"-md-previewer-btn"),"btn","btn-default"),c({isPreviewingMarkdown:!1,markdownPreviewer:function(e){var t=document.createElement("div");return t.classList.add("".concat(s,"-md-previewer"),"form-control"),t.style.display="none",t.attachShadow({mode:"open"}).innerHTML="\n                <style>".concat(p,'</style>\n                <link href="styles/activity_encapsulated.css" rel="stylesheet" type="text/css">\n                <style>:host img {max-width: 100%; height: auto; overflow: hidden;}</style>\n                <div></div>\n            '),e.parentNode.insertBefore(t,e.previousElementSibling&&e.previousElementSibling.classList.contains("sn-stream-input-decorator")?e.previousElementSibling:e),t},decorator:function(e){for(var t=e.previousElementSibling;t;t=t.previousElementSibling)if(t.classList.contains("sn-stream-input-decorator"))return t;return null},characterCounterFunction:function(e){return function(e){return g(e).length}},markdownPreviewerSubbarIndex:u(function(e){var t=n.cloneNode(!0);return t.addEventListener("click",f.bind(t,e)),t})}),o("[id*=sysverb_update]:not([data-".concat(s,"-save-button-processed]),button.activity-submit:not([data-").concat(s,"-save-button-processed])"),function(e){var n,t=_createForOfIteratorHelper(e);try{var r=function(){var t=n.value;t.setAttribute("data-".concat(s,"-save-button-processed"),"true");var e=t.cloneNode(!0);e.removeAttribute("onclick"),e.removeAttribute("ng-click"),e.setAttribute("data-".concat(s,"-save-button-processed"),"true"),t.id&&(e.id="".concat(s,"-clone-of-")+t.id),t.parentNode.insertBefore(e,t),t.style.opacity=0,t.style.position="absolute",t.style.pointerEvents="none",t.tabIndex=-1,e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),m.trigger("save_or_post"),!function(){for(var e,t=[document.getElementById("activity-stream-work_notes-textarea"),document.getElementById("activity-stream-comments-textarea"),document.getElementById("activity-stream-textarea"),document.getElementById("sc_task.parent.comments")],n=0,r=t;n<r.length;n++){var i=r[n],o=d.get(i);i&&o&&(o.isPreviewingMarkdown&&f(i,!1),(o=g(i.value))!=i.value&&(e=!0,a(d.get(i),o,[[o.length,o.length]])))}return e}()?t.click():setTimeout(function(){t.click()},i)})};for(t.s();!(n=t.n()).done;)r()}catch(e){t.e(e)}finally{t.f()}})},t.exports.parseMarkdown=g,window.parseMarkdown=g},{"./constants.js":1,"./events.js":2,"./helpers.js":3,"./styles.js":9,"./textarea_subbar.js":10,"./textareas.js":11}],6:[function(d,e,t){e.exports=function(){var e,t=d("./constants.js").CSS_PREFIX,n=_createForOfIteratorHelper(location.search.substring(1).split("&"));try{for(n.s();!(e=n.n()).done;){var r=e.value,i=void 0;try{var o=_slicedToArray(r.split("="),2),a=o[0],i=o[1];if(decodeURIComponent(a)!="".concat(t,"-search-mac"))continue;i=decodeURIComponent(i)}catch(e){continue}var s=document.querySelector("form.mais-universal-search.search-form.navbar-search");if(!s)break;var l=s.action.match(/p_auth=([^&=]+)/);if(!l)break;var c=l[1];location.replace("https://mydevices.stanford.edu/group/mydevices/m?p_p_id=mydevicesportlet_WAR_maismydevicesportlet&p_p_lifecycle=1&p_p_state=normal&p_p_mode=view&_mydevicesportlet_WAR_maismydevicesportlet_action=deviceSearch&p_auth=".concat(c,"&_mydevicesportlet_WAR_maismydevicesportlet_searchInput=").concat(encodeURIComponent(i)));break}}catch(e){n.e(e)}finally{n.f()}}},{"./constants.js":1}],7:[function(e,t,n){var r=e("./constants.js"),F=r.REPLACEMENT_START_DELIMITER,C=r.REPLACEMENT_END_DELIMITER,A=r.CSS_PREFIX,L=r.AUTOFILL_REPLACEMENT,m=r.REPLACEMENT_MAX_RECURSION_DEPTH,i=r.CURSOR,f=r.CURSOR_REGEX,r=e("./helpers.js"),I=r.escapeHTML,g=r.dedent,c=r.replaceTextareaValue,r=e("./textareas.js"),o=r.textareaData,a=r.addTextareaData,s=r.addTextareaCallback,d=e("./events.js"),P=[{triggers:["test"],value:"| ".concat(i("foo")," | ").concat(i("bar")," |"),autoFillerVisibility:!0},{triggers:[""],value:"\n            Hi ".concat(F,"ticket.requester.name.first").concat(C,",\n            \n            ").concat(i(),"\n            \n            Please let us know if you have questions or issues.\n            \n            Best,\n            ").concat(F,"current_user.name.first").concat(C,"\n        "),autoFillerVisibility:!1},{triggers:["ticket.requester.name.first","ticket.requester.first_name"],value:function(e){var t=document.getElementById("sys_display.ticket.u_requested_for")||document.getElementById("sys_display.incident.u_requested_for")||document.getElementById("sc_task.request_item.requested_for_label");if(t){var n=t.value.indexOf(" ");return~n?t.value.substring(0,n):t.value}return null},description:"The requester's first name",autoFillerVisibility:!0},{triggers:["ticket.requester.name.full","ticket.requester.full_name","ticket.requester.name"],value:function(e){var t=document.getElementById("sys_display.ticket.u_requested_for")||document.getElementById("sys_display.incident.u_requested_for")||document.getElementById("sc_task.request_item.requested_for_label");return t?t.value:null},description:"The requester's full name",autoFillerVisibility:!0},{triggers:["ticket.requester.email"],value:function(e){var t=document.getElementById("ticket.u_guest_email")||document.getElementById("incident.u_guest_email")||document.getElementById("sys_readonly.sc_task.request_item.u_email");return t?t.value:null},description:"The requester's email address",autoFillerVisibility:!0},{triggers:["ticket.requester.number","ticket.requester.phone","ticket.requester.phone_number"],value:function(e){var t=document.getElementById("ticket.u_phone_number")||document.getElementById("incident.u_phone_number")||document.getElementById("sys_readonly.sc_task.request_item.u_phone_number");if(t){var n=t.value.replace(/\D/g,"");return 10==n.length?"(".concat(n.substring(0,3),") ").concat(n.substring(3,6),"-").concat(n.substring(6,10)):t.value}return null},description:"The requester's phone number",autoFillerVisibility:!0},{triggers:["ticket.number","ticket.id"],value:function(e){var t=document.getElementById("sys_readonly.ticket.number")||document.getElementById("sys_readonly.incident.number")||document.getElementById("sys_readonly.sc_task.number");return t?t.value:null},description:"The ticket's number",autoFillerVisibility:!0},{triggers:["ticket.title","ticket.name","ticket.description","ticket.short_description"],value:function(e){var t=document.getElementById("ticket.short_description")||document.getElementById("incident.short_description")||document.getElementById("sc_task.short_description");return t?t.value:null},description:"The ticket's title",autoFillerVisibility:!0},{triggers:["current_user.name.first","current_user.first_name"],value:function(e){var t,n=(null===(n=window.NOW)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.firstName)||null;if("string"==typeof n)return n;if((n=(null===(t=window.NOW)||void 0===t?void 0:t.user_display_name)||null)||(r=document.querySelector("[id*='add_me'][data-user]"))&&(n=r.getAttribute("data-name")),"string"!=typeof n)return null;var r=n.indexOf(" ");return~r?n.substring(0,r):n},description:"Your first name",autoFillerVisibility:!0},{triggers:["current_user.name.full","current_user.full_name","current_user.name"],value:function(e){var t,n=(null===(t=window.NOW)||void 0===t?void 0:t.user_display_name)||null;return n||(t=document.querySelector("[id*='add_me'][data-user]"))&&(n=t.getAttribute("data-name")),"string"==typeof n?n:null},description:"Your full name",autoFillerVisibility:!0},{triggers:["current_user.email"],value:function(e){return window.NOW&&window.NOW.user_email||null},description:"Your email address",autoFillerVisibility:!0},{triggers:["info.current_date","info.today"],value:function(e){var t=new Date,n=t.getMonth()+1+"",r=t.getDate()+"",t=t.getFullYear()+"";return"".concat(("00"+n).substring(n.length),"/").concat(("00"+r).substring(r.length),"/").concat(t)},description:"Today's date as MM/DD/YYYY",autoFillerVisibility:!0},{triggers:["info.current_time"],value:function(e){var t=new Date,n=t.getHours()+"",t=t.getMinutes()+"";return"".concat(n<=12?n||12:n-12,":").concat(("00"+t).substring(t.length)," ").concat(n<12?"AM":"PM")},description:"The current time as HH:MM AM/PM",autoFillerVisibility:!0},{triggers:["link.mac_address","link.macaddress","link.mac"],value:"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018475\n",description:"Link for finding MAC addresses",autoFillerVisibility:!0},{triggers:["link.mydevices","link.my_devices"],value:"https://mydevices.stanford.edu",description:"Link to MyDevices page",autoFillerVisibility:!0},{triggers:["link.iprequest"],value:"https://iprequest.stanford.edu",description:"Link to IPRequest page",autoFillerVisibility:!0},{triggers:["link.snsr"],value:"https://snsr.stanford.edu",description:"Link to SNSR download page",autoFillerVisibility:!0},{triggers:["link.mdm"],value:"https://uit.stanford.edu/service/mobiledevice/management",description:"Link to MDM page for all devices",autoFillerVisibility:!0},{triggers:["link.mdm.ios","link.mdm.iphone"],value:"https://uit.stanford.edu/service/mobiledevice/management/enroll_ios",description:"Link to MDM page for iOS devices",autoFillerVisibility:!0},{triggers:["link.mdm.android"],value:"https://uit.stanford.edu/service/mobiledevice/management/enroll_android",description:"Link to MDM page for Android devices",autoFillerVisibility:!0},{triggers:["link.swde"],value:"https://uit.stanford.edu/service/encryption/wholedisk",description:"Link to SWDE page for all devices",autoFillerVisibility:!0},{triggers:["link.swde.mac","link.swde.macbook","link.swde.macos","link.swde.osx"],value:"https://uit.stanford.edu/service/encryption/wholedisk/install_mac",description:"Link to SWDE page for MacBooks",autoFillerVisibility:!0},{triggers:["link.swde.windows","link.swde.pc"],value:"https://uit.stanford.edu/service/encryption/wholedisk/install_windows",description:"Link to SWDE page for Windows PCs",autoFillerVisibility:!0},{triggers:["link.bigfix","link.big_fix"],value:"https://uit.stanford.edu/software/bigfix",description:"Link to BigFix page for all devices",autoFillerVisibility:!0},{triggers:["link.vpn"],value:"https://uit.stanford.edu/service/vpn",description:"Link to Stanford VPN page for all devices",autoFillerVisibility:!0},{triggers:["link.vpn.mac","link.vpn.macbook","link.vpn.macos","link.vpn.osx"],value:"https://web.stanford.edu/dept/its/support/vpn/installers/InstallAnyConnect.pkg",description:"Link to download VPN for MacBooks",autoFillerVisibility:!0},{triggers:["link.vpn.windows","link.vpn.pc"],value:"https://web.stanford.edu/dept/its/support/vpn/installers/InstallAnyConnect.exe",description:"Link to download VPN for Windows PCs",autoFillerVisibility:!0},{triggers:["link.vlre"],value:"https://uit.stanford.edu/service/vlre",description:"Link to download VLRE for all devices",autoFillerVisibility:!0},{triggers:["link.vlre.mac","link.vlre.macbook","link.vlre.macos","link.vlre.osx"],value:"https://uit.stanford.edu/service/vlre/mac",description:"Link to download VLRE for MacBooks",autoFillerVisibility:!0},{triggers:["link.vlre.windows","link.vlre.pc"],value:"https://uit.stanford.edu/service/vlre/windows",description:"Link to download VLRE for Windows PCs",autoFillerVisibility:!0},{triggers:["link.cardinal_key","link.cardinalkey"],value:"https://uit.stanford.edu/service/cardinalkey/installation",description:"Link to download Cardinal Key for all devices",autoFillerVisibility:!0},{triggers:["link.cardinal_key.mac","link.cardinal_key.macbook","link.cardinal_key.macos","link.cardinal_key.osx","link.cardinalkey.mac","link.cardinalkey.macbook","link.cardinalkey.macos","link.cardinalkey.osx"],value:"https://uit.stanford.edu/service/cardinalkey/installation#macos",description:"Link to download Cardinal Key for MacBooks",autoFillerVisibility:!0},{triggers:["link.cardinal_key.windows","link.cardinal_key.pc","link.cardinalkey.windows","link.cardinalkey.pc"],value:"https://uit.stanford.edu/service/cardinalkey/installation##windows",description:"Link to download Cardinal Key for Windows PCs",autoFillerVisibility:!0},{triggers:["link.ssrt"],value:"https://uit.stanford.edu/software/ssrt",description:"Link to download SSRT for all devices",autoFillerVisibility:!0},{triggers:["link.ssrt.mac","link.ssrt.macbook","link.ssrt.macos","link.ssrt.osx"],value:"https://web.stanford.edu/dept/its/support/ess/mac/unrestricted/SSRT.pkg",description:"Link to download SSRT for MacBooks",autoFillerVisibility:!0},{triggers:["link.ssrt.windows","link.ssrt.pc"],value:"https://web.stanford.edu/dept/its/support/ess/pc/unrestricted/RunSSRT.exe",description:"Link to download SSRT for Windows PCs",autoFillerVisibility:!0},{triggers:["link.appointment","link.book_appointment"],value:"https://bit.ly/bookPTSappt",description:"Link to book appointments with PTS",autoFillerVisibility:!0},{triggers:["link.forget_wifi.mac","link.forget_wifi.macbook","link.forget_wifi.macos","link.forget_wifi.osx"],value:"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018430",description:"Link to instructions for forgetting Wi-Fi networks on MacBooks",autoFillerVisibility:!0},{triggers:["link.forget_wifi.windows","link.forget_wifi.pc"],value:"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018429",description:"Link to instructions for forgetting Wi-Fi networks on Windows PCs",autoFillerVisibility:!0},{triggers:["link.forget_wifi.ios","link.forget_wifi.iphone"],value:"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018427",description:"Link to instructions for forgetting Wi-Fi networks on iPhones",autoFillerVisibility:!0},{triggers:["link.forget_wifi.android"],value:"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018428",description:"Link to instructions for forgetting Wi-Fi networks on Android phones",autoFillerVisibility:!0},{triggers:["link.gsb_registration"],value:"http://gsbentreg.stanford.edu/",description:"Link to GSB's device registration Google form.",autoFillerVisibility:!0},{triggers:["link.enrollment_quiz","link.enrollment_questionnaire","link.enrollment"],value:"https://uit.stanford.edu/service/enrollment",description:"Link to Enrollment Questionnaire page",autoFillerVisibility:!0},{triggers:["link.enrollment_quiz.mac","link.enrollment_quiz.macbook","link.enrollment_quiz.macos","link.enrollment_quiz.osx","link.enrollment_questionnaire.mac","link.enrollment_questionnaire.macbook","link.enrollment_questionnaire.macos","link.enrollment_questionnaire.osx","link.enrollment.mac","link.enrollment.macbook","link.enrollment.macos","link.enrollment.osx"],value:"https://uit.stanford.edu/service/enrollment/mac",description:"Link to Enrollment Questionnaire for MacBooks",autoFillerVisibility:!0},{triggers:["link.enrollment_quiz.windows","link.enrollment_quiz.pc","link.enrollment_questionnaire.windows","link.enrollment_questionnaire.pc","link.enrollment.windows","link.enrollment.pc"],value:"https://uit.stanford.edu/service/enrollment/windows",description:"Link to Enrollment Questionnaire for Windows PCs",autoFillerVisibility:!0},{triggers:["link.enrollment_quiz.mobile","link.enrollment_quiz.ios","link.enrollment_quiz.iphone","link.enrollment_quiz.android","link.enrollment_questionnaire.mobile","link.enrollment_questionnaire.ios","link.enrollment_questionnaire.iphone","link.enrollment_questionnaire.android","link.enrollment.mobile","link.enrollment.ios","link.enrollment.iphone","link.enrollment.android"],value:"https://uit.stanford.edu/service/enrollment/mobiledevice",description:"Link to Enrollment Questionnaire for Mobile Device",autoFillerVisibility:!0},{triggers:["phone_number.pts","phone_number.us","phone_number.ours"],value:"(650) 723-9204",description:"Phone number for PTS",autoFillerVisibility:!0},{triggers:["phone_number.uit","phone_number.helpsu","phone_number.help_su","phone_number.it"],value:"(650) 725-4357",description:"Phone number for UIT/HelpSU",autoFillerVisibility:!0},{triggers:["phone_number.med_school","phone_number.som","phone_number.medical_school"],value:"(650) 725-8000",description:"Phone number for SoM IT",autoFillerVisibility:!0},{triggers:["icon.mydevices.compliant","icon.my_devices.compliant"],value:'[code]<img style="height:1em;vertical-align:-.15em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-not_compliant.svg" alt=""/>[/code]',description:'Inserts a "<img style="height:1em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-not_compliant.svg" alt="green checkmark icon"/>"',autoFillerVisibility:!0},{triggers:["icon.mydevices.n/a","icon.mydevices.na","icon.my_devices.n/a","icon.my_devices.na"],value:'[code]<img style="height:1em;vertical-align:-.15em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-na.svg" alt=""/>[/code]',description:'Inserts a "<img style="height:1em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-na.svg" alt="gray dash icon"/>"',autoFillerVisibility:!0},{triggers:["icon.mydevices.not_compliant","icon.mydevices.uncompliant","icon.mydevices.incompliant","icon.mydevices.noncompliant","icon.my_devices.not_compliant","icon.my_devices.uncompliant","icon.my_devices.incompliant","icon.my_devices.noncompliant"],value:'[code]<img style="height:1em;vertical-align:-.15em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-compliant.svg" alt=""/>[/code]',description:'Inserts a "<img style="height:1em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-compliant.svg" alt="red X icon"/>"',autoFillerVisibility:!0},{triggers:["icon.info","icon.information"],value:'[code]<img style="height:1em;vertical-align:-.15em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/info.svg" alt="info icon"/>[/code]',description:'Inserts a "<img style="height:1em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/info.svg" alt="circled info icon"/>"',autoFillerVisibility:!0},{triggers:["icon.apple","icon.apple_logo","icon.apple_menu"],value:'[code]<img style="height:1em;vertical-align:-.15em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/apple.svg" alt="Apple logo"/>[/code]',description:'Inserts a "<img style="height:1em" src="https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/apple.svg" alt="black Apple logo"/>"',autoFillerVisibility:!0}];t.exports.REPLACEMENTS=P;for(var O=[{insert:"link.",name:"Links",icon:"link"},{insert:"ticket.",name:"Ticket Information",icon:"list"},{insert:"current_user.",name:"Current User Information",icon:"user"},{insert:"phone_number.",name:"Phone Numbers",icon:"phone"},{insert:"info.",name:"Additional Information",icon:"info"},{insert:"icon.",name:"Icons",icon:"image"}],R={},l=0,u=P;l<u.length;l++){var p,h=u[l],v=_createForOfIteratorHelper(h.triggers);try{for(v.s();!(p=v.n()).done;){var b=p.value;R[b.trim().toLowerCase()]=h}}catch(e){v.e(e)}finally{v.f()}"function"!=typeof h.value&&(h.value=g(h.value+""))}function y(e,t){for(var n,r=e.length;~(n=e.lastIndexOf(F,r))&&0<=r;){var i=e.indexOf(C,n);if(!~i)break;var o=function e(t,n){if(m<=n)return["[Maximum recursion depth exceeded]",!0];var r=t;var i=0;var o;for(;o=f.exec(t.substring(i));)i+=o.index,t=t.substring(0,i)+t.substring(i+o[0].length);t=t.trim().toLowerCase();var a;{if(!(t in R))return[F+r+C,!1];if("function"==typeof R[t].value){var s=R[t].value();if(null==s)return[F+r+C,!1];a=g(s+"")}else a=R[t].value}var l=a.length;var c;for(;~(c=a.lastIndexOf(F,l))&&0<=l;){var d=a.indexOf(C,c);if(!~d)break;var u=a.substring(c+F.length,d),p=e(u,n+1),u=_slicedToArray(p,2),p=u[0];u[1];a=a.substring(0,c)+p+a.substring(d+C.length),l=c-1}return[a,!0]}(e.substring(n+F.length,i),0),a=_slicedToArray(o,2),o=a[0],a=a[1];a&&i+C.length<=t?t+=o.length-(i+C.length-n):a&&n<t&&(t=n+o.length),e=e.substring(0,n)+o+e.substring(i+C.length),r=n-1}for(var s,l=[];s=f.exec(e);){var c=(s[1]||"").replace(/\\"/g,'"').replace(/\\\\/g,"\\");e=e.substring(0,s.index)+c+e.substring(s.index+s[0].length),l.push([s.index,s.index+c.length]),s.index<t&&(t<s.index+s[0].length?t=s.index+c.length:t+=c.length-s[0].length)}return[e,l=!l.length?[[t,t]]:l]}t.exports.init=function(){function r(e){var t=function(e){if(e.element.selectionStart<F.length)return null;var t=e.element.value.lastIndexOf(F,e.element.selectionStart-F.length),n=e.element.value.lastIndexOf(C,e.element.selectionStart-1);if(!~t||~n&&t<n)return null;n=e.element.value.indexOf("\n",t);if(~n&&n<e.element.selectionStart)return null;return e.element.value.substring(t+F.length,e.element.selectionStart)}(e);if(null===t||document.activeElement!=e.element)return e.replacementAutoFiller.style.display="none",e.isAutoFillingReplacement=!1,e.replacementAutoFillerFocusedIndex=null,void d.trigger("hide_auto_filler",e);e.isAutoFillingReplacement||(e.replacementAutoFiller.style.display="block",e.isAutoFillingReplacement=!0,d.trigger("show_auto_filler",e));var n=e.element.value.lastIndexOf(F,e.element.selectionStart-F.length);e.replacementMirror.innerText=e.element.value.substring(0,n);var r=document.createElement("span"),i=e.element.value.indexOf(" ",n),o=e.element.value.indexOf("\n",n),a=e.element.value.indexOf("\t",n),s=e.element.selectionStart;~i&&(s=Math.min(i,s)),~o&&(s=Math.min(o,s)),~a&&(s=Math.min(a,s)),r.innerText=e.element.value.substring(n,s),e.replacementMirror.appendChild(r);s=e.replacementMirror.getBoundingClientRect().height,r=r.offsetLeft;e.replacementAutoFiller.style.left=Math.min(r,parseFloat(e.replacementMirror.style.width)-260)+parseFloat(e.elementStyles.paddingLeft)+parseFloat(e.elementStyles.borderLeftWidth)+e.element.offsetLeft-e.element.scrollLeft+"px",e.replacementAutoFiller.style.top=s+parseFloat(e.elementStyles.paddingTop)+parseFloat(e.elementStyles.borderTopWidth)+e.element.offsetTop-e.element.scrollTop+"px",e.replacementAutoFillerFocusedIndex=0,function(x,E){E=E.trim().toLowerCase();var S=document.createDocumentFragment();if(""==E.replace(/[^a-zA-Z\d]+/g,"")){var e,t=_createForOfIteratorHelper(O);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=document.createElement("li");r.innerHTML='\n                <div class="sn-card-component_accent-bar"></div>\n                <i class="icon-'.concat(n.icon,'"></i>\n                <strong>').concat(I(n.name)||'""','</strong>\n                <i class="icon-arrow-right-rounded"></i>\n            '),r.setAttribute("data-".concat(A,"-autofill-type"),"namespace"),r.setAttribute("data-".concat(A,"-insertion-text"),n.insert),r.setAttribute("data-".concat(A,"-append-end-delimiter"),"false"),T(r,x),S.appendChild(r,x)}}catch(e){t.e(e)}finally{t.f()}}else!function(){var t,n,e=E,r=Object.keys(R).filter(function(e){return R[e].autoFillerVisibility}),i=0,o=E.indexOf(".");~o&&(t=E.substring(0,o+1),1==(n=O.filter(function(e){return t==e.insert})).length&&(r=r.filter(function(e){return e.startsWith(n[0].insert)}),e=E.substring(o+1),i=o+1));var a,s=_createForOfIteratorHelper(e.split(/[^a-zA-Z\d]+/));try{for(s.s();!(a=s.n()).done;)!function(){var t=a.value;r=r.filter(function(e){return e.substring(i).includes(t)})}()}catch(e){s.e(e)}finally{s.f()}var l,c=new Map,d=_createForOfIteratorHelper(r);try{for(d.s();!(l=d.n()).done;){var u,p,m=l.value,f=R[m];c.has(f)?(u=c.get(f),(p=f.triggers.indexOf(m))<u&&c.set(f,p)):c.set(f,f.triggers.indexOf(m))}}catch(e){d.e(e)}finally{d.f()}var g,h=[],v=_createForOfIteratorHelper(P);try{for(v.s();!(g=v.n()).done;){var b=g.value;c.has(b)&&h.push(b)}}catch(e){v.e(e)}finally{v.f()}for(var y=0,w=h;y<w.length;y++){var _=w[y],k=document.createElement("li");k.innerHTML='\n                <div class="sn-card-component_accent-bar"></div>\n                <div>\n                    <strong>'.concat(F).concat(I(_.triggers[c.get(_)])||"").concat(C,"</strong>\n                    <small>").concat(_.description,'</small>\n                </div>\n                <i class="icon-chevron-right"></i>\n            '),k.setAttribute("data-".concat(A,"-autofill-type"),"replacement"),k.setAttribute("data-".concat(A,"-insertion-text"),_.triggers[c.get(_)]),k.setAttribute("data-".concat(A,"-append-end-delimiter"),L),T(k,x),S.appendChild(k,x)}}();0!=S.children.length?(x.replacementAutoFillerFocusedIndex=0,x.replacementAutoFiller.innerText="",x.replacementAutoFiller.appendChild(S),l(x),d.trigger("update_auto_filler")):(x.replacementAutoFiller.style.display="none",x.isAutoFillingReplacement=!1,x.replacementAutoFillerFocusedIndex=null,d.trigger("hide_auto_filler",x))}(e,t)}function T(t,n){t.tabIndex=0,t.role="button",t.addEventListener("click",function(e){return i(e,n)}),t.addEventListener("keydown",function(e){"Enter"!=e.code&&"Space"!=e.code||i(e,n)}),t.addEventListener("mouseenter",function(e){t.setAttribute("data-".concat(A,"-hovering"),"true"),t.firstElementChild.classList.add("sn-card-component_accent-bar_dark")}),t.addEventListener("mouseleave",function(e){t.setAttribute("data-".concat(A,"-hovering"),"false"),"true"!=t.getAttribute("data-".concat(A,"-focusing"))&&"true"!=t.getAttribute("data-".concat(A,"-artificial-focusing"))&&t.firstElementChild.classList.remove("sn-card-component_accent-bar_dark")}),t.addEventListener("focus",function(e){t.setAttribute("data-".concat(A,"-focusing"),"true"),t.firstElementChild.classList.add("sn-card-component_accent-bar_dark"),n.replacementAutoFillerFocusedIndex=Array.prototype.indexOf.call(t.parentNode.children,t),l(n)}),t.addEventListener("blur",function(e){t.setAttribute("data-".concat(A,"-focusing"),"false"),"true"!=t.getAttribute("data-".concat(A,"-hovering"))&&"true"!=t.getAttribute("data-".concat(A,"-artificial-focusing"))&&t.firstElementChild.classList.remove("sn-card-component_accent-bar_dark")})}function i(e,t){var n,r,i=e.currentTarget,o=i.getAttribute("data-".concat(A,"-insertion-text")),a=t.element.value.lastIndexOf(F,t.element.selectionStart-F.length),s=t.element.value.indexOf(F,t.element.selectionStart),e=t.element.value.indexOf(C,t.element.selectionStart);r=~e&&(!~s||s<e)?(n=t.element.value.substring(0,a+F.length)+o+t.element.value.substring(e),a+F.length+o.length+C.length):(r="true"==i.getAttribute("data-".concat(A,"-append-end-delimiter")),n=t.element.value.substring(0,a+F.length)+o+(r?C:"")+t.element.value.substring(Math.max(t.element.selectionStart,t.element.selectionEnd)),a+F.length+o.length+(r?C.length:0)),d.trigger("select_auto_filler_tab",t,i,o),c.apply(void 0,[t].concat(_toConsumableArray(y(n,r))))}function l(e){var t=e.replacementAutoFiller.children;if(0==t.length)return e.replacementAutoFiller.style.display="none",e.isAutoFillingReplacement=!1,void(e.replacementAutoFillerFocusedIndex=null);e.replacementAutoFillerFocusedIndex<0?e.replacementAutoFillerFocusedIndex=0:e.replacementAutoFillerFocusedIndex>=t.length&&(e.replacementAutoFillerFocusedIndex=t.length-1);var n,r=e.replacementAutoFillerFocusedIndex,i=_createForOfIteratorHelper(e.replacementAutoFiller.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.setAttribute("data-".concat(A,"-artificial-focusing"),"false"),"true"!=o.getAttribute("data-".concat(A,"-hovering"))&&"true"!=o.getAttribute("data-".concat(A,"-focusing"))&&o.firstElementChild.classList.remove("sn-card-component_accent-bar_dark")}}catch(e){i.e(e)}finally{i.f()}t[r].setAttribute("data-".concat(A,"-artificial-focusing"),"true"),t[r].firstElementChild.classList.add("sn-card-component_accent-bar_dark"),"function"==typeof t[r].scrollIntoViewIfNeeded&&t[r].scrollIntoViewIfNeeded()}a({replacementMirror:function(e){var t=this.elementStyles,n=document.createElement("div");return n.classList.add("".concat(A,"-textarea-mirror")),n.style.width=e.getBoundingClientRect().width-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth)+"px",n.style.fontFamily=t.fontFamily,n.style.fontWeight=t.fontWeight,n.style.fontStyle=t.fontStyle,n.style.fontSize=t.fontSize,n.style.lineHeight=t.lineHeight,document.body.appendChild(n),n},replacementAutoFiller:function(e){var t=document.createElement("ul");return t.classList.add("".concat(A,"-auto-filler"),"h-card","dropdown-menu"),t.style.display="none",e.parentNode.appendChild(t),t},isAutoFillingReplacement:!1,replacementAutoFillerFocusedIndex:null}),s(function(t){this.addEventListener("keydown",function(e){t.isAutoFillingReplacement&&("ArrowDown"==e.code?(t.replacementAutoFillerFocusedIndex++,l(t),e.preventDefault()):"ArrowUp"==e.code?(t.replacementAutoFillerFocusedIndex--,l(t),e.preventDefault()):"Enter"!=e.code&&"Tab"!=e.code||(t.replacementAutoFiller.children[t.replacementAutoFillerFocusedIndex].click(),e.preventDefault()))}),this.parentNode.addEventListener("focusout",function(e){(null===e.relatedTarget||e.relatedTarget instanceof HTMLElement&&!e.currentTarget.contains(e.relatedTarget))&&r(t)})}),document.addEventListener("input",function(e){var t,n=o.get(e.target);n&&(r(n),n.suppressInputs||(e=(t=_slicedToArray(y(n.element.value,n.element.selectionStart),2))[0],t=t[1],e!=n.element.value&&c(n,e,t)))}),document.addEventListener("selectionchange",function(e){var t=o.get(document.activeElement);t&&r(t)})},t.exports.resolveReplacements=y},{"./constants.js":1,"./events.js":2,"./helpers.js":3,"./textareas.js":11}],8:[function(e,t,n){var r=e("./constants.js"),c=r.CSS_PREFIX,d=r.NETDB_HOST,i=e("./helpers.js").waitForElements,u=e("./styles.js").SMART_TEXT,p=e("./events.js"),m=/\b(?:[a-f\d]{12}(?![a-f\d])|[a-f\d]{4}(?:[-–][a-f\d]{4}){2}|[a-f\d]{4}([^a-z\d\s])[a-f\d]{4}\1[a-f\d]{4}(?!\1?[a-f\d])|[a-f\d]{2}(?:[-–][a-f\d]{2}){5}|[a-f\d]{2}([^a-z\d])[a-f\d]{2}(?:\2[a-f\d]{2}){4})(?!\2?[a-f\d])/i,f=/(^|[^.])\b((?:[1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(?:\.(?:[1-9]?\d|1\d\d|2[0-4]\d|25[0-5])){3})\b(?!\.\d)/,g=/\b(rescomp-\d+-\d+|sr\d+-[\da-f]+)(?:\.stanford\.edu)?\b/,h=/\b(?:CALL|CHG|INC|REQ|RITM|SR|TASK)\d+\b/,v=new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET","https://api.allorigins.win/get?url=".concat(encodeURIComponent("https://gitlab.com/wireshark/wireshark/-/raw/master/manuf"),"&timestamp=").concat((new Date).valueOf())),n.addEventListener("readystatechange",function(){4==this.readyState&&(200==this.status?e(o(JSON.parse(this.response).contents)):((n=new XMLHttpRequest).open("GET","https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/OUI_list.txt?timestamp=".concat((new Date).valueOf())),n.addEventListener("readystatechange",function(){4==this.readyState&&(200==this.status?e(o(this.response)):t(this.response))}),n.send()))}),n.send()});function o(e){for(var t,n,r={},i=0;~(i=e.indexOf("\n",i));i++)"#"!=e[i+1]&&"\n"!=e[i+1]&&(8==(t=e.substring(i+1,e.indexOf("\n",i+1)).split("\t"))[0].length?r[t[0]]=t[2]||t[1]:"/"==t[0][17]&&(n=parseInt(t[0].substring(18))/4,n=t[0].substring(0,n+Math.ceil(n/2-1)),r[t[0].substring(0,8)]=n.length,r[n]=t[2]||t[1]));return r}function b(o){if(o.nodeType==Node.TEXT_NODE)for(;;){var n=m.exec(o.textContent),r=f.exec(o.textContent),i=g.exec(o.textContent),a=h.exec(o.textContent),e=null;if(n&&(null==e||e.index>n.index)&&(e=n),r&&(null==e||e.index>r.index)&&(e=r),i&&(null==e||e.index>i.index)&&(e=i),null===(e=a&&(null==e||e.index>a.index)?a:e))break;e==n&&function(){var r=n[0].toUpperCase().replace(/[^A-F\d]/g,"").replace(/(.{2})/g,":$1").substring(1),e=document.createElement("span");e.classList.add("".concat(c,"-smart-text-span"),"".concat(c,"-smart-text-mac-address")),e.setAttribute("data-".concat(c,"-mac-address"),r),e.innerHTML='<input value="'.concat(r,'" readonly/><span><span>').concat(n[0],'</span><ul class="').concat(c,'-smart-text-popup dropdown-menu"><li>MAC Address</li><li class="').concat(c,'-mac-address-oui" style="font-style:italic">Loading OUIs...</li><li><button class="btn ').concat(c,'-smart-text-copy">Copy</button></li><li>Search in:</li><li><ul><li><a target="_blank" href="https://').concat(d,"/fs_node_result?display_order.hardware_address=1&display_order.object=2&display_order.ip_address=3&display_order.node_state=4&display_order.make_and_model=5&display_order.os=6&display_order.department=7&display_order.user=8&column=Name&direction=ascending&purge=&hardware_address=").concat(r,'">NetDB</a></li><li><a target="_blank" href="http://day.stanford.edu:9696/manage/dhcplog/check_db?input=').concat(r,'">DHCP Log</a></li><li><a target="_blank" href="https://archer.stanford.edu/webacs/welcomeAction.do#pageId=full_search_pageId&query=').concat(encodeURIComponent(r),'&forceLoad=true">Cisco Prime</a></li><li><a target="_blank" href="https://mydevices.stanford.edu/group/mydevices?').concat(encodeURIComponent("".concat(c,"-search-mac")),"=").concat(encodeURIComponent(r),'">MyDevices</a></li><li><a target="_blank" href="https://iprequest.stanford.edu/iprequest/process/search.jsp?ipaddr=&macaddress=').concat(encodeURIComponent(r),'&search=0&sort=UPPER%28lastname%29%2C+UPPER%28firstname%29">IPRequest</a></li></ul></li></ul></span>'),e.addEventListener("click",function(e){return e.stopPropagation()});var t=e.firstElementChild,i=e.querySelector(".".concat(c,"-mac-address-oui"));v.then(function(e){var t,n,e=(t=e,(e=(n=r).substring(0,8))in t&&("number"!=typeof t[e]||(e=n.substring(0,t[e]))in t)?t[e]:null);null===e?i.textContent="Unregistered OUI":(i.textContent="OUI: ".concat(e),i.style.fontStyle="initial")},function(){i.textContent="Couldn't Load OUIs"}),e.querySelector(".".concat(c,"-smart-text-copy")).addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();try{navigator.clipboard.writeText(r)}catch(e){t.focus(),document.execCommand("selectAll",!1)||t.setSelectionRange(0,t.value.length),document.execCommand("copy",!1)}}),o.parentNode.insertBefore(document.createTextNode(o.textContent.substring(0,n.index)),o),o.parentNode.insertBefore(e,o),o.textContent=o.textContent.substring(n.index+n[0].length),p.trigger("insert_smart_text",e,"MAC address")}(),e==r&&function(){var t=r[2],e=document.createElement("span");e.classList.add("".concat(c,"-smart-text-span"),"".concat(c,"-smart-text-ip-address")),e.setAttribute("data-".concat(c,"-ip-address"),t),e.innerHTML='<input value="'.concat(t,'" readonly/><span><span>').concat(r[2],'</span><ul class="').concat(c,'-smart-text-popup dropdown-menu"><li>IP Address</li><li><button class="btn ').concat(c,'-smart-text-copy">Copy</button></li><li>Search in:</li><li><ul><li><a target="_blank" href="https://').concat(d,"/fs_network_result?display_order.object=1&display_order.location=2&display_order.address_space=2&display_order.comment=3&purge=&dhcp_address=").concat(t,'">NetDB</a></li><li><a target="_blank" href="https://iprequest.stanford.edu/iprequest/process/search.jsp?ipaddr=').concat(encodeURIComponent(t),'&macaddress=&search=0&sort=UPPER%28lastname%29%2C+UPPER%28firstname%29">IPRequest</a></li></ul></li></ul></span>'),e.addEventListener("click",function(e){return e.stopPropagation()});var n=e.firstElementChild;e.querySelector(".".concat(c,"-smart-text-copy")).addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();try{navigator.clipboard.writeText(t)}catch(e){n.focus(),document.execCommand("selectAll",!1)||n.setSelectionRange(0,n.value.length),document.execCommand("copy",!1)}}),o.parentNode.insertBefore(document.createTextNode(o.textContent.substring(0,r.index+r[1].length)),o),o.parentNode.insertBefore(e,o),o.textContent=o.textContent.substring(r.index+r[0].length),p.trigger("insert_smart_text",e,"IP address")}(),e==i&&function(){var t=i[1],e=document.createElement("span");e.classList.add("".concat(c,"-smart-text-span"),"".concat(c,"-smart-text-node-name")),e.setAttribute("data-".concat(c,"-node-name"),t),e.innerHTML='<input value="'.concat(t,'" readonly/><span><span>').concat(i[0],'</span><ul class="').concat(c,'-smart-text-popup dropdown-menu"><li>Node Name</li><li><button class="btn ').concat(c,'-smart-text-copy">Copy</button></li><li>Search in:</li><li><ul><li><a target="_blank" href="https://').concat(d,"/node_info?name=").concat(t,'.stanford.edu">NetDB</a></li><li><a target="_blank" href="https://iprequest.stanford.edu/iprequest/process/search.jsp?ipaddr=&macaddress=&hostname=').concat(encodeURIComponent(t),'&search=0&sort=UPPER%28lastname%29%2C+UPPER%28firstname%29">IPRequest</a></li></ul></li></ul></span>'),e.addEventListener("click",function(e){return e.stopPropagation()});var n=e.firstElementChild;e.querySelector(".".concat(c,"-smart-text-copy")).addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();try{navigator.clipboard.writeText(t)}catch(e){n.focus(),document.execCommand("selectAll",!1)||n.setSelectionRange(0,n.value.length),document.execCommand("copy",!1)}}),o.parentNode.insertBefore(document.createTextNode(o.textContent.substring(0,i.index)),o),o.parentNode.insertBefore(e,o),o.textContent=o.textContent.substring(i.index+i[0].length),p.trigger("insert_smart_text",e,"node name")}(),e==a&&function(){var t=a[0],e=document.createElement("span");e.classList.add("".concat(c,"-smart-text-span"),"".concat(c,"-smart-text-ticket")),e.setAttribute("data-".concat(c,"-ticket"),t),e.innerHTML='<input value="'.concat(t,'" readonly/><span><span>').concat(a[0],'</span><ul class="').concat(c,'-smart-text-popup dropdown-menu"><li>Ticket Number</li><li><button class="btn ').concat(c,'-smart-text-copy">Copy</button></li><li>Search in:</li><li><ul><li><a href="https://stanford.service-now.com/text_search_exact_match.do?sysparm_search=').concat(t,'">ServiceNow</a></li></ul></li></ul></span>'),e.addEventListener("click",function(e){return e.stopPropagation()});var n=e.firstElementChild;e.querySelector(".".concat(c,"-smart-text-copy")).addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();try{navigator.clipboard.writeText(t)}catch(e){n.focus(),document.execCommand("selectAll",!1)||n.setSelectionRange(0,n.value.length),document.execCommand("copy",!1)}}),o.parentNode.insertBefore(document.createTextNode(o.textContent.substring(0,a.index)),o),o.parentNode.insertBefore(e,o),o.textContent=o.textContent.substring(a.index+a[0].length),p.trigger("insert_smart_text",e,"ticket")}()}else if(o.nodeType==Node.ELEMENT_NODE||o.nodeType==Node.DOCUMENT_FRAGMENT_NODE)if(o.shadowRoot){var t,s=o.shadowRoot;s.firstElementChild&&s.firstElementChild.classList.contains("data-".concat(c,"-shadow-style"))||((t=document.createElement("style")).classList.add("".concat(c,"-shadow-style")),t.innerHTML=u,o.shadowRoot.insertBefore(t,s.firstChild)),b(s)}else for(var l=o.childNodes.length-1;0<=l;l--)b(o.childNodes[l])}t.exports.init=function(){p.addListener("show_preview",function(e){b(e.markdownPreviewer)}),i(".sn-widget-textblock-body:not([data-".concat(c,"-smart-text-searched]),.sn-widget-list-table-cell:not([data-").concat(c,"-smart-text-searched]),sn-html-content-wrapper:not([data-").concat(c,"-smart-text-searched])"),function(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.setAttribute("data-".concat(c,"-smart-text-searched"),"true");for(var i=r;i;i=i.parentElement)if(i.style.overflow="visible","LI"==i.nodeName)i.style.display="inline-block",i.style.width="100%";else if(i.classList.contains("h-card-wrapper")&&i.classList.contains("activities-form"))break;b(r)}}catch(e){n.e(e)}finally{n.f()}})},t.exports.replaceSmartText=b},{"./constants.js":1,"./events.js":2,"./helpers.js":3,"./styles.js":9}],9:[function(e,a,t){var s=e("./constants.js").CSS_PREFIX,l=e("./events.js");function c(e,t,n,r){var i,o,a=[],s=_createForOfIteratorHelper(r.cssRules);try{for(s.s();!(i=s.n()).done;){var l=i.value;l.selectorText&&l.selectorText.includes(e)&&a.push(l.cssText.replaceAll(e,t))}}catch(e){s.e(e)}finally{s.f()}a.length&&(o=a.join("\n"),(r=document.createElement("style")).innerHTML=o,n.document.head.appendChild(r))}function n(o,a,s){for(var e=Array.from(s.document.styleSheets),n=0,r=e;n<r.length;n++)(function(){var e=r[n];if("STYLE"==e.ownerNode.nodeName&&!e.ownerNode.innerHTML.includes(o))return;c(o,a,s,e);var t=e.ownerNode;new MutationObserver(function(){c(o,a,s,t.sheet)}).observe(e.ownerNode,{characterData:"STYLE"==t.nodeName,childList:"STYLE"==t.nodeName,attributes:"LINK"==t.nodeName,attributeFilter:["href"]})})();new MutationObserver(function(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r,i=_createForOfIteratorHelper(t.value.addedNodes);try{for(i.s();!(r=i.n()).done;)!function(){var e=r.value;"STYLE"==e.nodeName?c(o,a,s,e.sheet):"LINK"==e.nodeName&&"stylesheet"==e.rel.toLowerCase()&&(e.sheet?c(o,a,s,e.sheet):e.addEventListener("load",function(){c(o,a,s,e.sheet)}))}()}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}}).observe(s.document.head,{childList:!0})}function d(e,t){n(e,t,window),window!==window.top&&n(e,t,window.top)}a.exports.SMART_TEXT="\n    .".concat(s,"-smart-text-span {\n        padding: .5rem;\n        margin: -.5rem;\n        z-index: 1;\n        position: relative;\n        display: inline-block;\n        line-height: 1;\n        text-align: left;\n    }\n\n    .").concat(s,"-smart-text-span:hover {\n        padding: .75rem 1rem;\n        margin: -.75rem -1rem;\n        z-index: 2;\n    }\n\n    .").concat(s,"-smart-text-span > input:first-child {\n        position: absolute;\n        opacity: 0;\n        pointer-events: none;\n        white-space: nowrap;\n    }\n\n    .").concat(s,"-smart-text-span > span:last-child {\n        position: relative;\n        display: inline-block;\n    }\n\n    .").concat(s,"-smart-text-span > span:last-child > span:first-child {\n        text-decoration: underline;\n        margin: 0;\n        border: 0;\n        padding: 0;\n        font-family: inherit;\n        font-size: inherit;\n        font-weight: inherit;\n        color: inherit;\n        vertical-align: baseline;\n        background: transparent;\n        -webkit-user-select: all;\n        user-select: all;\n    }\n\n    .").concat(s,"-smart-text-span:hover .").concat(s,"-smart-text-popup,\n    .").concat(s,"-smart-text-span:focus-within > .").concat(s,"-smart-text-popup,\n    .").concat(s,"-smart-text-span > input:focus + span:last-child .").concat(s,"-smart-text-popup {\n        display: block;\n    }\n\n    .").concat(s,"-smart-text-popup,\n    .").concat(s,"-smart-text-popup ul {\n        list-style: none;\n        padding: 0;\n        margin: 0;\n    }\n\n    .").concat(s,'-smart-text-popup {\n        display: none;\n        position: absolute;\n        top: initial;\n        bottom: calc(100% + .5rem);\n        left: 50%;\n        background-color: white;\n        border-radius: 3px;\n        border: 1px solid #cbcbcb;\n        font-size: 13px;\n        font-weight: initial;\n        font-style: initial;\n        text-decoration: initial;\n        color: initial;\n        width: 140px;\n        transform: translateX(-50%);\n        padding: .25em 0;\n        font-family: SourceSansPro, "Helvetica Neue", Helvetica, Arial, sans-serif;\n        margin: 0 !important;\n        line-height: 1.15;\n    }\n\n    .').concat(s,"-smart-text-popup li {\n        list-style: none;\n        padding: .1em .25em !important;\n        box-sizing: border-box;\n        margin: 0;\n    }\n\n    .").concat(s,"-smart-text-popup button,\n    .").concat(s,"-smart-text-popup a {\n        text-decoration: underline;\n        color: inherit;\n        margin: -.1em -.25em;\n        border: 0;\n        border-radius: 0;\n        padding: .1em .25em !important;\n        background: transparent;\n        min-height: initial;\n        min-width: initial;\n        line-height: inherit;\n        font-size: inherit;\n        font-family: inherit;\n        vertical-align: baseline;\n        cursor: pointer;\n        height: 100%;\n        width: calc(100% + .5em);\n        display: inline-block;\n        text-align: left;\n        box-sizing: border-box;\n    }\n\n    .").concat(s,"-smart-text-popup button:hover,\n    .").concat(s,"-smart-text-popup button:focus,\n    .").concat(s,"-smart-text-popup a:hover,\n    .").concat(s,"-smart-text-popup a:focus {\n        background-color: #e6e9eb;\n        text-decoration: underline;\n    }\n\n    .").concat(s,"-smart-text-popup li ul {\n        margin: -.25em;\n    }\n\n    .").concat(s,"-smart-text-popup li ul li {\n        padding: .1em .25em 0 1.25em !important;\n    }\n\n    .").concat(s,"-smart-text-popup li ul li button,\n    .").concat(s,"-smart-text-popup li ul li a {\n        margin: -.1em -.25em 0 -1.25em;\n        padding: .1em .25em 0 1.25em !important;\n        width: calc(100% + 1.5em);\n    }\n\n    .").concat(s,"-smart-text-popup > li:first-child {\n        font-weight: bold;\n        text-transform: uppercase;\n        font-size: .8em;\n        letter-spacing: .25px;\n        text-align: center;\n    }\n"),a.exports.REPLACEMENTS="\n    .".concat(s,"-textarea-mirror {\n        opacity: 0;\n        pointer-events: none;\n        position: fixed;\n        top: 200vh;\n        left: 200vw;\n        white-space: pre-wrap;\n    }\n    \n    .").concat(s,"-auto-filler {\n        list-style: none;\n        padding: 0 !important;\n        margin: 0;\n        overflow-y: auto !important;\n        position: absolute !important;\n        max-height: 150px;\n        width: 260px;\n        box-sizing: border-box;\n        z-index: 3;\n    }\n\n    .").concat(s,"-auto-filler li {\n        position: relative;\n        padding: 1px 5px 0 10px;\n        cursor: pointer;\n        display: flex;\n    }\n\n    .").concat(s,"-auto-filler li .sn-card-component_accent-bar {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n    }\n\n    .").concat(s,"-auto-filler li .sn-card-component_accent-bar.sn-card-component_accent-bar_dark {\n        z-index: 1;\n    }\n\n    .").concat(s,'-auto-filler li:not(:first-child) .sn-card-component_accent-bar:before {\n        content: "";\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 1px;\n        width: 260px;\n        background-color: inherit;\n    }\n\n    .').concat(s,'-auto-filler li:not(:last-child) .sn-card-component_accent-bar:after {\n        content: "";\n        position: absolute;\n        bottom: -1px;\n        left: 0;\n        height: 1px;\n        width: 260px;\n        background-color: inherit;\n    }\n\n    .').concat(s,"-auto-filler li strong {\n        display: block;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        overflow: hidden;\n    }\n\n    .").concat(s,"-auto-filler li small {\n        color: #777;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        overflow: hidden;\n    }\n\n    .").concat(s,"-auto-filler li[data-").concat(s,'-autofill-type="namespace"] {\n        padding: 6px 5px 5px 10px;\n    }\n\n    .').concat(s,"-auto-filler li[data-").concat(s,'-autofill-type="namespace"] strong {\n        flex-grow: 1;\n        margin: 0 5px;\n    }\n\n    .').concat(s,"-auto-filler li i {\n        align-self: center;\n    }\n\n    .").concat(s,"-auto-filler li[data-").concat(s,'-autofill-type="replacement"] > div:not(.sn-card-component_accent-bar) {\n        display: flex;\n        flex-direction: column;\n        flex-grow: 1;\n        flex-basis: 0;\n        overflow: hidden;\n    }\n\n    .').concat(s,"-auto-filler li[data-").concat(s,'-autofill-type="replacement"] .icon-chevron-right {\n        display: none;\n    }\n\n    .').concat(s,"-auto-filler li[data-").concat(s,'-autofill-type="replacement"][data-').concat(s,'-hovering="true"] .icon-chevron-right,\n    .').concat(s,"-auto-filler li[data-").concat(s,'-autofill-type="replacement"][data-').concat(s,'-focusing="true"] .icon-chevron-right,\n    .').concat(s,"-auto-filler li[data-").concat(s,'-autofill-type="replacement"][data-').concat(s,'-artificial-focusing="true"] .icon-chevron-right {\n        display: block;\n    }\n'),a.exports.MACROS="\n    #".concat(s,"-macros_modal .sn-widget-list-item.state-active .sn-widget-list-subtitle {\n        color: inherit;\n    }\n\n    #").concat(s,"-macros_modal .sn-widget-list-subtitle {\n        white-space: normal;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,"-preview-header {\n        margin-bottom: 1em;\n    }\n\n    #").concat(s,"-macros_modal .sn-widget-list-content.sn-widget-list-content_static {\n        padding: 0;\n        transform: scale(1.6);\n        border-radius: 50%;\n    }\n\n    #").concat(s,"-macros_modal .sn-widget-list-content.sn-widget-list-content_static .icon-preview {\n        transform: scale(.625);\n        transition: transform .1s ease-in-out;\n    }\n\n    #").concat(s,"-macros_modal .sn-widget-list-content.sn-widget-list-content_static:hover .icon-preview,\n    #").concat(s,"-macros_modal .sn-widget-list-item.state-active .sn-widget-list-content.sn-widget-list-content_static .icon-preview {\n        transform: scale(.9);\n    }\n\n    #").concat(s,"-macros_modal .col-sm-4,\n    #").concat(s,"-macros_modal .col-sm-8 {\n        transition: width 0.25s ease-in-out;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,"-preview-field-container:not(:last-of-type) {\n        margin-bottom: 1em;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,"-preview-field-value {\n        white-space: break-spaces;\n        line-height: 1.4;\n        min-height: initial;\n        height: initial;\n        position: relative;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,"-caret-position-span {\n        display: inline-block;\n        position: relative;\n        line-height: 1.2;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,"-caret-position-span > span:nth-child(1) {\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        background: currentColor;\n        opacity: 0.075;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,"-caret-position-span > span:nth-child(2) {\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        border: 1px solid currentColor;\n        border-radius: 3px;\n        opacity: 0.4;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,"-caret-position-span > span:nth-child(3) {\n        padding: 1px 3px;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,'-caret-position-span > span:nth-child(3):before {\n        content: "\\200b";\n    }\n\n    #').concat(s,"-macros_modal .").concat(s,"-caret-position-span.").concat(s,"-span-empty > span:nth-child(3) {\n        font-style: italic;\n        opacity: 0.7;\n        position: relative;\n        left: -1px;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,"-caret-position-span.").concat(s,'-span-empty > span:nth-child(3):after {\n        content: "Cursor";\n    }\n\n    #').concat(s,"-macros_modal .").concat(s,"-preview-work_notes-value {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n        border-left: 0;\n        margin-left: 5px;\n        width: calc(100% - 5px);\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,'-preview-work_notes-value:before {\n        content: "";\n        display: block;\n        position: absolute;\n        top: -1px;\n        left: -5px;\n        bottom: -1px;\n        width: 5px;\n        background-color: rgba(255,215,0,.8); /* gold with 80% opacity */\n        transform: scaleX(-1);\n        border-radius: inherit;\n        border: inherit;\n    }\n\n    #').concat(s,"-macros_modal .").concat(s,"-macro-list-flex {\n        display: flex;\n        flex-direction: column-reverse;\n    }\n\n    #").concat(s,"-macros_modal .").concat(s,"-macro-list-flex > div:first-child {\n        \n    }\n\n    #").concat(s,"-macro-list .sn-widget-list-item:last-of-type {\n        border-bottom: 0 !important;\n    }\n\n    #").concat(s,"-macro-list {\n        flex-basis: 0;\n        flex-grow: 1;\n        overflow: auto;\n    }\n\n    #").concat(s,"-macro-search-container {\n        transform: scaleY(-1);\n    }\n\n    #").concat(s,"-macro-search-container input {\n        transform: scaleY(-1);\n        display: block;\n        width: 100%;\n    }\n"),a.exports.MARKDOWN="\n    .".concat(s,"-md-previewer {\n        overflow: visible !important;\n        height: initial !important;\n        border-bottom-right-radius: 0 !important;\n        border-bottom-left-radius: 0 !important;\n    }\n"),a.exports.CURSOR_FORM_FIELDS="\n    .".concat(s,"-tab-indicator {\n        position: absolute;\n        top: 1px;\n        right: 1px;\n        padding: .2em .4em !important;\n        width: initial;\n        height: initial !important;\n        min-height: initial !important;\n        border-top-width: 0;\n        border-right-width: 0;\n        border-top-left-radius: 0;\n        border-bottom-right-radius: 0;\n        font-size: 13px !important;\n    }\n\n    .").concat(s,"-tab-indicator button {\n        height: 18px;\n        width: 18px;\n        padding: 0;\n        margin-right: .444em;\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 90%;\n    }\n"),a.exports.SUBBAR="\n    textarea[data-".concat(s,'-has-subbar="true"]:not(:read-only) {\n        border-bottom-right-radius: 0 !important;\n        border-bottom-left-radius: 0 !important;\n    }\n\n    .').concat(s,"-textarea-subbar {\n        display: flex !important;\n        border-top-right-radius: 0 !important;\n        border-top-left-radius: 0 !important;\n        border-top: 0 !important;\n        padding: 3px 0 3px 6px !important;\n        justify-content: flex-end;\n        height: initial !important;\n    }\n\n    textarea[data-").concat(s,'-has-subbar="true"]:read-only + .').concat(s,"-textarea-subbar {\n        display: none !important;\n    }\n\n    .").concat(s,"-textarea-subbar > * {\n        margin: 0 !important;\n        margin-right: 6px !important;\n    }\n"),a.exports.REPLACEMENT_SUBSTYLES={code:":not(pre)>code{background-color:#F5F5F5;border:1px solid#CCC;color:#4A4A4A;border-radius:.2em;font-size:90%;padding:0 .2em}",table:"table{border-collapse:collapse}thead,tbody{vertical-align:top}",tr:"thead+tbody tr,tr+tr{border-top:1px solid#AAA}td{padding:.1em .3em}",img:"img{max-width:100%}"},a.exports.injectStyleSheets=function(e,t,n,r){var i=document.createElement("style"),o="";e&&(o+=a.exports.SMART_TEXT),t&&(o+=a.exports.REPLACEMENTS),n&&(o+=a.exports.MACROS),r&&(o+=a.exports.MARKDOWN),(t||n)&&(o+=a.exports.CURSOR_FORM_FIELDS),(n||r)&&(o+=a.exports.SUBBAR),i.innerHTML=o,document.head.appendChild(i);o=[i];window!==window.top&&(o.push(i.cloneNode(!0)),window.top.document.head.appendChild(o[o.length-1])),l.trigger("insert_stylesheet",o),n&&d("#settings_modal","#".concat(s,"-macros_modal")),r&&d(".btn-default:active",".".concat(s,"-md-previewer-btn[data-").concat(s,'-is-previewing="true"]'))}},{"./constants.js":1,"./events.js":2}],10:[function(e,t,n){var p=e("./constants.js").CSS_PREFIX,e=e("./textareas.js"),s=e.textareaData,e=e.addTextareaData,m=[];e({subbar:function(s){var t=this,l=this;function e(e,t){var n,r,i,o,a=s.nextElementSibling.classList.contains("counter")?s.nextElementSibling:s.nextElementSibling.nextElementSibling.classList.contains("counter")?s.nextElementSibling.nextElementSibling:null;a&&(n=a.innerText.match(/\d+ characters remaining of (\d+) characters/),r=n?+n[1]:0,l.characterCounterFunction=l.characterCounterFunction||function(e){return e.length},t.disconnect(),l.characterCounter=a,t=document.createElement("span"),(l.hiddenCharacterCounter=t).style.display="none",t.classList.add("counter"),new MutationObserver(function(){var e=(l.characterCounterFunction||function(e){return e.length})(s.value),e=r-e;a.innerText="".concat(e," characters remaining of ").concat(r," characters"),20<=e?a.classList.remove("warning","exceeded"):0<=e?(a.classList.remove("exceeded"),a.classList.add("warning")):(a.classList.remove("warning"),a.classList.add("exceeded"))}).observe(t,{characterData:!0,childList:!0,subtree:!0}),s.parentNode.insertBefore(t,s.nextSibling),s.parentNode.insertBefore(l.subbar,a),(i=a.nextElementSibling.id.includes("live_region_text")?a.nextElementSibling:a.nextElementSibling.nextElementSibling.id.includes("live_region_text")?a.nextElementSibling.nextElementSibling:null)&&((o=document.createElement("span")).style.display="none",new MutationObserver(function(){i.innerText=o.innerText}).observe(o,{characterData:!0,childList:!0,subtree:!0}),s.parentNode.insertBefore(o,t.nextSibling)))}if(l.characterCounter=null,l.hiddenCharacterCounter=null,s.offsetHeight<=1&&s.parentNode==document.body)return null;var n=new MutationObserver(e);n.observe(s.parentNode,{childList:!0});var r=document.createElement("div");r.classList.add("".concat(p,"-textarea-subbar"),"form-control"),s.parentNode.insertBefore(r,s.nextSibling),l.subbar=r,l.subbarElements=l.subbarElements||[];for(var i,o,a=s.previousElementSibling;a;a=a.previousElementSibling)if(a.classList.contains("sn-stream-input-decorator"))if("break"===function(){var e=s.previousElementSibling;return e.style.bottom="initial",e.style.height=parseFloat(t.elementStyles.height)-6+"px",new MutationObserver(function(){e.style.height=parseFloat(this.elementStyles.height)-6+"px"}.bind(t)).observe(s,{attributes:!0,attributeFilter:["style"]}),"break"}())break;s.previousElementSibling&&s.previousElementSibling.classList.contains("sn-stream-input-decorator")&&(i=getComputedStyle(s.previousElementSibling).bottom,o=getComputedStyle(r).height,parseFloat(i)&&(s.previousElementSibling.style.bottom="calc(".concat(o," + ").concat(i,")"))),s.setAttribute("data-".concat(p,"-has-subbar"),"true");var c,d=_createForOfIteratorHelper(m);try{for(d.s();!(c=d.n()).done;){var u=(0,c.value)(s);u instanceof Node&&(r.appendChild(u),this.subbarElements.push(u))}}catch(e){d.e(e)}finally{d.f()}return e(0,n),r},subbarElements:function(e){return[]}}),t.exports.addToSubBar=function(e){var t,n=_createForOfIteratorHelper(s);try{for(n.s();!(t=n.n()).done;){var r,i=_slicedToArray(t.value,2),o=i[0],a=i[1];!a.subbar||(r=e(o))instanceof Node&&(a.subbar.appendChild(r),a.subbarElements.push(r))}}catch(e){n.e(e)}finally{n.f()}return m.push(e),m.length-1}},{"./constants.js":1,"./textareas.js":11}],11:[function(e,t,n){var l=e("./constants.js").CSS_PREFIX,e=e("./helpers.js").waitForElements,c=new Map,d={element:function(e){return e},elementStyles:function(e){return getComputedStyle(e)}},u=[];e("textarea:not([data-".concat(l,"-textarea-processed])"),function(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.setAttribute("data-".concat(l,"-textarea-processed"),"true");var i,o=Object.clone(d);for(i in o)"function"==typeof o[i]&&(o[i]=o[i].call(o,r,i));c.set(r,o);var a,s=_createForOfIteratorHelper(u);try{for(s.s();!(a=s.n()).done;)a.value.call(r,o)}catch(e){s.e(e)}finally{s.f()}}}catch(e){n.e(e)}finally{n.f()}}),t.exports.addTextareaData=function(e){var t,n=_createForOfIteratorHelper(c);try{for(n.s();!(t=n.n()).done;){var r,i=_slicedToArray(t.value,2),o=i[0],a=i[1];for(r in e)"function"==typeof e[r]?a[r]=e[r].call(a,o,r):a[r]=e[r]}}catch(e){n.e(e)}finally{n.f()}d=_objectSpread(_objectSpread({},d),e)},t.exports.addTextareaCallback=function(e){var t,n=_createForOfIteratorHelper(c);try{for(n.s();!(t=n.n()).done;){var r=_slicedToArray(t.value,2),i=r[0],o=r[1];e.call(i,o)}}catch(e){n.e(e)}finally{n.f()}u.push(e)},t.exports.textareaData=c},{"./constants.js":1,"./helpers.js":3}],12:[function(e,t,n){"mydevices.stanford.edu"==location.hostname?e("./modules/my_devices.js")():(e("./modules/styles.js").injectStyleSheets(!0,!0,!0,!0),e("./modules/smart_text.js").init(),e("./modules/replacements.js").init(),e("./modules/macros.js").init(),e("./modules/markdown.js").init())},{"./modules/macros.js":4,"./modules/markdown.js":5,"./modules/my_devices.js":6,"./modules/replacements.js":7,"./modules/smart_text.js":8,"./modules/styles.js":9}]},{},[12]);